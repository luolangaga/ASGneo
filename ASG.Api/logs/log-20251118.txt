2025-11-18 23:21:32.372 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-18 23:21:32.489 +08:00 [INF] WebApplication built successfully.
2025-11-18 23:21:32.592 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-18 23:21:32.593 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-18 23:21:33.195 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:21:33.201 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:21:33.208 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-18 23:21:33.213 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-11-18 23:21:33.246 +08:00 [INF] User profile is available. Using 'C:\Users\luolan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-18 23:21:33.345 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Events" AS "e")
2025-11-18 23:21:33.349 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Teams" AS "t")
2025-11-18 23:21:33.351 +08:00 [INF] Starting Kestrel...
2025-11-18 23:21:33.442 +08:00 [INF] Database backup saved to /var/backups/asg\ASGApiDb_20251118_232133.db
2025-11-18 23:21:33.487 +08:00 [INF] Now listening on: http://localhost:5250
2025-11-18 23:21:33.487 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-18 23:21:33.487 +08:00 [INF] Hosting environment: Development
2025-11-18 23:21:33.488 +08:00 [INF] Content root path: C:\Users\luolan\ASG\ASG.Api
2025-11-18 23:21:56.198 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:21:56.198 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:21:56.242 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:21:56.242 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:21:56.248 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 51.0504ms
2025-11-18 23:21:56.248 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 51.0828ms
2025-11-18 23:21:56.272 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:21:56.272 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:21:56.277 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:21:56.277 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:21:56.505 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2025/11/17 12:55:27', Current time (UTC): '2025/11/18 15:21:56'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-18 23:21:56.505 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2025/11/17 12:55:27', Current time (UTC): '2025/11/18 15:21:56'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-18 23:21:56.514 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2025/11/17 12:55:27', Current time (UTC): '2025/11/18 15:21:56'.
2025-11-18 23:21:56.514 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2025/11/17 12:55:27', Current time (UTC): '2025/11/18 15:21:56'.
2025-11-18 23:21:56.519 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-18 23:21:56.519 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-18 23:21:56.523 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-18 23:21:56.523 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-18 23:21:56.523 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 401 0 null 251.1232ms
2025-11-18 23:21:56.524 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 401 0 null 251.1128ms
2025-11-18 23:22:01.007 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Auth/login - null null
2025-11-18 23:22:01.008 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:01.009 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Auth/login - 204 null null 1.4425ms
2025-11-18 23:22:01.010 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Auth/login - application/json 61
2025-11-18 23:22:01.012 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:01.014 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AuthController.Login (ASG.Api)'
2025-11-18 23:22:01.024 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ASG.Api.DTOs.UserLoginDto) on controller ASG.Api.Controllers.AuthController (ASG.Api).
2025-11-18 23:22:01.083 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 23)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-11-18 23:22:01.189 +08:00 [INF] User logged in successfully: luolan12323@outlook.com
2025-11-18 23:22:01.191 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AuthResponseDto'.
2025-11-18 23:22:01.210 +08:00 [INF] Executed action ASG.Api.Controllers.AuthController.Login (ASG.Api) in 183.5188ms
2025-11-18 23:22:01.210 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AuthController.Login (ASG.Api)'
2025-11-18 23:22:01.213 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Auth/login - 200 null application/json; charset=utf-8 202.1519ms
2025-11-18 23:22:09.161 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - null null
2025-11-18 23:22:09.162 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - null null
2025-11-18 23:22:09.162 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.163 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - 204 null null 1.2941ms
2025-11-18 23:22:09.163 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming - null null
2025-11-18 23:22:09.163 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events - null null
2025-11-18 23:22:09.163 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.163 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.164 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.164 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming - 204 null null 1.3962ms
2025-11-18 23:22:09.164 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - 204 null null 2.6401ms
2025-11-18 23:22:09.164 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events - 204 null null 1.4574ms
2025-11-18 23:22:09.165 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - application/json null
2025-11-18 23:22:09.166 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.168 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - application/json null
2025-11-18 23:22:09.168 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events - application/json null
2025-11-18 23:22:09.168 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/upcoming - application/json null
2025-11-18 23:22:09.169 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.169 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.169 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:09.176 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api)'
2025-11-18 23:22:09.176 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api)'
2025-11-18 23:22:09.176 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api)'
2025-11-18 23:22:09.176 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api)'
2025-11-18 23:22:09.179 +08:00 [INF] Route matched with {action = "GetAllEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetAllEvents() on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:09.179 +08:00 [INF] Route matched with {action = "GetUpcomingEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetUpcomingEvents() on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:09.179 +08:00 [INF] Route matched with {action = "GetUpcomingEventsPaged", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PagedResult`1[ASG.Api.DTOs.EventDto]]] GetUpcomingEventsPaged(Int32, Int32) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:09.180 +08:00 [INF] Route matched with {action = "GetActiveRegistrationEventsPaged", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PagedResult`1[ASG.Api.DTOs.EventDto]]] GetActiveRegistrationEventsPaged(Int32, Int32) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:09.232 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:22:09.232 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:22:09.232 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:22:09.233 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId"
FROM "Events" AS "e"
LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "e"."Id" = "t1"."EventId"
ORDER BY "e"."CreatedAt" DESC, "e"."Id", "t"."Id", "t1"."TeamId", "t1"."EventId"
2025-11-18 23:22:09.237 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM "Events" AS "e"
LEFT JOIN (
    SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt" AS "InviteExpiresAt0", "t0"."InviteToken" AS "InviteToken0", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId"
    FROM "TeamEvents" AS "t"
    INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
) AS "t1" ON "e"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "e"."Id" = "e0"."EventId"
WHERE "e"."CompetitionStartTime" > @__now_0
ORDER BY "e"."CompetitionStartTime", "e"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:09.239 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."Status" = 'RegistrationOpen' AND "e"."RegistrationStartTime" <= @__now_0 AND "e"."RegistrationEndTime" >= @__now_0
    ORDER BY "e"."RegistrationEndTime"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t"."Id" = "e0"."EventId"
ORDER BY "t"."RegistrationEndTime", "t"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:09.239 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."CompetitionStartTime" > @__now_0
    ORDER BY "e"."CompetitionStartTime"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t"."Id" = "e0"."EventId"
ORDER BY "t"."CompetitionStartTime", "t"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:09.312 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:09.314 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:09.327 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."CompetitionStartTime" > @__now_0
2025-11-18 23:22:09.327 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."Status" = 'RegistrationOpen' AND "e"."RegistrationStartTime" <= @__now_0 AND "e"."RegistrationEndTime" >= @__now_0
2025-11-18 23:22:09.328 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PagedResult`1[[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:09.329 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PagedResult`1[[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:09.332 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api) in 152.2781ms
2025-11-18 23:22:09.332 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api) in 151.6217ms
2025-11-18 23:22:09.332 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api) in 151.8554ms
2025-11-18 23:22:09.332 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api) in 152.7896ms
2025-11-18 23:22:09.332 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api)'
2025-11-18 23:22:09.332 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api)'
2025-11-18 23:22:09.333 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api)'
2025-11-18 23:22:09.333 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api)'
2025-11-18 23:22:09.334 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/upcoming - 200 null application/json; charset=utf-8 165.2583ms
2025-11-18 23:22:09.334 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events - 200 null application/json; charset=utf-8 165.3429ms
2025-11-18 23:22:09.335 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - 200 null application/json; charset=utf-8 170.63ms
2025-11-18 23:22:09.336 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - 200 null application/json; charset=utf-8 167.5174ms
2025-11-18 23:22:14.618 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - null null
2025-11-18 23:22:14.619 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:14.619 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 204 null null 1.0857ms
2025-11-18 23:22:14.625 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - application/json null
2025-11-18 23:22:14.626 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:14.627 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:22:14.630 +08:00 [INF] Route matched with {action = "GetEvent", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.EventDto]] GetEvent(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:14.647 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:22:14.653 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:14.655 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.EventDto'.
2025-11-18 23:22:14.656 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEvent (ASG.Api) in 25.8347ms
2025-11-18 23:22:14.656 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:22:14.657 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 200 null application/json; charset=utf-8 31.0895ms
2025-11-18 23:22:14.660 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - null null
2025-11-18 23:22:14.660 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:14.660 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 204 null null 0.7246ms
2025-11-18 23:22:14.662 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - application/json null
2025-11-18 23:22:14.663 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:14.663 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:22:14.665 +08:00 [INF] Route matched with {action = "GetEventRegistrations", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.TeamEventDto]]] GetEventRegistrations(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:14.674 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
FROM "TeamEvents" AS "t"
INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
INNER JOIN "Events" AS "e" ON "t"."EventId" = "e"."Id"
WHERE "t"."EventId" = @__eventId_0
ORDER BY "t"."RegistrationTime"
2025-11-18 23:22:14.678 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:14.688 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:22:14.693 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-11-18 23:22:14.694 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.TeamEvent, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.TeamEventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:14.695 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api) in 28.9084ms
2025-11-18 23:22:14.695 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:22:14.695 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 200 null application/json; charset=utf-8 33.2977ms
2025-11-18 23:22:14.700 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - null null
2025-11-18 23:22:14.700 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:14.701 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 204 null null 0.7993ms
2025-11-18 23:22:14.702 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - application/json null
2025-11-18 23:22:14.703 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:14.703 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:22:14.706 +08:00 [INF] Route matched with {action = "GetEventAdmins", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.UserResponseDto]]] GetEventAdmins(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:14.711 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."UserId"
FROM "EventAdmins" AS "e"
WHERE "e"."EventId" = @__eventId_0
2025-11-18 23:22:14.712 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.UserResponseDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:14.713 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api) in 6.6774ms
2025-11-18 23:22:14.713 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:22:14.714 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 200 null application/json; charset=utf-8 11.2804ms
2025-11-18 23:22:18.647 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Users/profile - null null
2025-11-18 23:22:18.648 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.648 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Users/profile - 204 null null 1.372ms
2025-11-18 23:22:18.650 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Users/profile - application/json null
2025-11-18 23:22:18.651 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.654 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.UsersController.GetProfile (ASG.Api)'
2025-11-18 23:22:18.656 +08:00 [INF] Route matched with {action = "GetProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller ASG.Api.Controllers.UsersController (ASG.Api).
2025-11-18 23:22:18.658 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:22:18.659 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.UserResponseDto'.
2025-11-18 23:22:18.660 +08:00 [INF] Executed action ASG.Api.Controllers.UsersController.GetProfile (ASG.Api) in 3.5688ms
2025-11-18 23:22:18.660 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.UsersController.GetProfile (ASG.Api)'
2025-11-18 23:22:18.660 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Users/profile - 200 null application/json; charset=utf-8 10.3573ms
2025-11-18 23:22:18.669 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - null null
2025-11-18 23:22:18.669 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.670 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 204 null null 0.6775ms
2025-11-18 23:22:18.671 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - application/json null
2025-11-18 23:22:18.673 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.673 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:22:18.675 +08:00 [INF] Route matched with {action = "GetTeam", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.TeamDto]] GetTeam(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:22:18.689 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t0"."Id0", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."CreatedAt0", "t0"."Email", "t0"."EmailConfirmed", "t0"."EmailCredits", "t0"."FirstName", "t0"."IsActive", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."Role", "t0"."SecurityStamp", "t0"."TeamId", "t0"."TwoFactorEnabled", "t0"."UpdatedAt0", "t0"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "u"."Id" AS "Id0", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt" AS "UpdatedAt0", "u"."UserName"
    FROM "Teams" AS "t"
    LEFT JOIN "Users" AS "u" ON "t"."Id" = "u"."TeamId"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."Id", "t0"."Id0"
2025-11-18 23:22:18.703 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.TeamDto'.
2025-11-18 23:22:18.706 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api) in 30.0065ms
2025-11-18 23:22:18.706 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:22:18.707 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 200 null application/json; charset=utf-8 35.5757ms
2025-11-18 23:22:18.710 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - null null
2025-11-18 23:22:18.711 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.711 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - 204 null null 1.0832ms
2025-11-18 23:22:18.713 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - application/json null
2025-11-18 23:22:18.714 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.715 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api)'
2025-11-18 23:22:18.717 +08:00 [INF] Route matched with {action = "GetTeamHonors", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetTeamHonors(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:22:18.730 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:22:18.731 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/team-logos/9978dc91-5a58-4102-bbd4-c9f01ee84757/logo.png - null null
2025-11-18 23:22:18.736 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__teamId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM "Events" AS "e"
LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
LEFT JOIN "TeamEvents" AS "t0" ON "e"."Id" = "t0"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "e"."Id" = "e0"."EventId"
WHERE "e"."ChampionTeamId" = @__teamId_0
ORDER BY COALESCE("e"."CompetitionEndTime", "e"."CompetitionStartTime") DESC, "e"."Id", "t"."Id", "t0"."TeamId", "t0"."EventId", "e0"."EventId"
2025-11-18 23:22:18.737 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:18.737 +08:00 [INF] The file /team-logos/9978dc91-5a58-4102-bbd4-c9f01ee84757/logo.png was not modified
2025-11-18 23:22:18.738 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api) in 19.3983ms
2025-11-18 23:22:18.738 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api)'
2025-11-18 23:22:18.738 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/team-logos/9978dc91-5a58-4102-bbd4-c9f01ee84757/logo.png - 304 null image/png 6.9968ms
2025-11-18 23:22:18.738 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - 200 null application/json; charset=utf-8 25.4033ms
2025-11-18 23:22:18.753 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/me/player - null null
2025-11-18 23:22:18.754 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.754 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/me/player - 204 null null 0.7331ms
2025-11-18 23:22:18.756 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/me/player - application/json null
2025-11-18 23:22:18.757 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:18.758 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api)'
2025-11-18 23:22:18.760 +08:00 [INF] Route matched with {action = "GetMyPlayer", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PlayerDto]] GetMyPlayer() on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:22:18.765 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId"
FROM "Players" AS "p"
WHERE "p"."UserId" = @__userId_0
LIMIT 1
2025-11-18 23:22:18.767 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PlayerDto'.
2025-11-18 23:22:18.767 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api) in 6.983ms
2025-11-18 23:22:18.767 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api)'
2025-11-18 23:22:18.768 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/me/player - 200 null application/json; charset=utf-8 11.9015ms
2025-11-18 23:22:35.756 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:22:35.757 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:35.757 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 1.1887ms
2025-11-18 23:22:35.759 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 45
2025-11-18 23:22:35.760 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:35.760 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:22:35.762 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:22:35.793 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:22:35.794 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:22:36.205 +08:00 [INF] Received HTTP response headers after 409.7187ms - 200
2025-11-18 23:22:36.206 +08:00 [INF] End processing HTTP request after 414.8487ms - 200
2025-11-18 23:22:38.549 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:22:38.551 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 2788.344ms
2025-11-18 23:22:38.551 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:22:38.573 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 2814.175ms
2025-11-18 23:22:47.058 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - null null
2025-11-18 23:22:47.059 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.059 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - null null
2025-11-18 23:22:47.059 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - 204 null null 1.2948ms
2025-11-18 23:22:47.060 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events - null null
2025-11-18 23:22:47.060 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.060 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming - null null
2025-11-18 23:22:47.060 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.060 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - 204 null null 1.0093ms
2025-11-18 23:22:47.061 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.061 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events - 204 null null 0.9008ms
2025-11-18 23:22:47.061 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming - 204 null null 1.1353ms
2025-11-18 23:22:47.064 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - application/json null
2025-11-18 23:22:47.064 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - application/json null
2025-11-18 23:22:47.065 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events - application/json null
2025-11-18 23:22:47.065 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.065 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/upcoming - application/json null
2025-11-18 23:22:47.065 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.066 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.066 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api)'
2025-11-18 23:22:47.066 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api)'
2025-11-18 23:22:47.065 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:47.067 +08:00 [INF] Route matched with {action = "GetUpcomingEventsPaged", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PagedResult`1[ASG.Api.DTOs.EventDto]]] GetUpcomingEventsPaged(Int32, Int32) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:47.067 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api)'
2025-11-18 23:22:47.067 +08:00 [INF] Route matched with {action = "GetActiveRegistrationEventsPaged", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PagedResult`1[ASG.Api.DTOs.EventDto]]] GetActiveRegistrationEventsPaged(Int32, Int32) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:47.067 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api)'
2025-11-18 23:22:47.067 +08:00 [INF] Route matched with {action = "GetUpcomingEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetUpcomingEvents() on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:47.068 +08:00 [INF] Route matched with {action = "GetAllEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetAllEvents() on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:47.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM "Events" AS "e"
LEFT JOIN (
    SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt" AS "InviteExpiresAt0", "t0"."InviteToken" AS "InviteToken0", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId"
    FROM "TeamEvents" AS "t"
    INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
) AS "t1" ON "e"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "e"."Id" = "e0"."EventId"
WHERE "e"."CompetitionStartTime" > @__now_0
ORDER BY "e"."CompetitionStartTime", "e"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:47.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."Status" = 'RegistrationOpen' AND "e"."RegistrationStartTime" <= @__now_0 AND "e"."RegistrationEndTime" >= @__now_0
    ORDER BY "e"."RegistrationEndTime"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t"."Id" = "e0"."EventId"
ORDER BY "t"."RegistrationEndTime", "t"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:47.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."CompetitionStartTime" > @__now_0
    ORDER BY "e"."CompetitionStartTime"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t"."Id" = "e0"."EventId"
ORDER BY "t"."CompetitionStartTime", "t"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:47.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId"
FROM "Events" AS "e"
LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "e"."Id" = "t1"."EventId"
ORDER BY "e"."CreatedAt" DESC, "e"."Id", "t"."Id", "t1"."TeamId", "t1"."EventId"
2025-11-18 23:22:47.073 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."Status" = 'RegistrationOpen' AND "e"."RegistrationStartTime" <= @__now_0 AND "e"."RegistrationEndTime" >= @__now_0
2025-11-18 23:22:47.074 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:47.075 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."CompetitionStartTime" > @__now_0
2025-11-18 23:22:47.076 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PagedResult`1[[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:47.076 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api) in 7.6991ms
2025-11-18 23:22:47.076 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api) in 8.6938ms
2025-11-18 23:22:47.076 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api)'
2025-11-18 23:22:47.077 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api)'
2025-11-18 23:22:47.077 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/upcoming - 200 null application/json; charset=utf-8 11.8576ms
2025-11-18 23:22:47.077 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - 200 null application/json; charset=utf-8 12.6499ms
2025-11-18 23:22:47.077 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:47.077 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PagedResult`1[[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:47.078 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api) in 9.1759ms
2025-11-18 23:22:47.078 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api)'
2025-11-18 23:22:47.078 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api) in 10.8329ms
2025-11-18 23:22:47.078 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events - 200 null application/json; charset=utf-8 13.558ms
2025-11-18 23:22:47.078 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api)'
2025-11-18 23:22:47.079 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - 200 null application/json; charset=utf-8 14.547ms
2025-11-18 23:22:48.738 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - null null
2025-11-18 23:22:48.739 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:48.739 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 204 null null 0.836ms
2025-11-18 23:22:48.741 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - application/json null
2025-11-18 23:22:48.741 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:48.742 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:22:48.742 +08:00 [INF] Route matched with {action = "GetEvent", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.EventDto]] GetEvent(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:48.743 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:48.745 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.EventDto'.
2025-11-18 23:22:48.745 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEvent (ASG.Api) in 2.6601ms
2025-11-18 23:22:48.745 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:22:48.745 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 200 null application/json; charset=utf-8 4.1856ms
2025-11-18 23:22:48.749 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - null null
2025-11-18 23:22:48.749 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:48.749 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 204 null null 0.7727ms
2025-11-18 23:22:48.751 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - application/json null
2025-11-18 23:22:48.751 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:48.752 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:22:48.752 +08:00 [INF] Route matched with {action = "GetEventRegistrations", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.TeamEventDto]]] GetEventRegistrations(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:48.753 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
FROM "TeamEvents" AS "t"
INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
INNER JOIN "Events" AS "e" ON "t"."EventId" = "e"."Id"
WHERE "t"."EventId" = @__eventId_0
ORDER BY "t"."RegistrationTime"
2025-11-18 23:22:48.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:48.757 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:22:48.758 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-11-18 23:22:48.758 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.TeamEvent, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.TeamEventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:48.759 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api) in 6.5564ms
2025-11-18 23:22:48.759 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:22:48.759 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 200 null application/json; charset=utf-8 8.1036ms
2025-11-18 23:22:48.763 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - null null
2025-11-18 23:22:48.764 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:48.764 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 204 null null 0.792ms
2025-11-18 23:22:48.765 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - application/json null
2025-11-18 23:22:48.765 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:48.766 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:22:48.766 +08:00 [INF] Route matched with {action = "GetEventAdmins", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.UserResponseDto]]] GetEventAdmins(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:48.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."UserId"
FROM "EventAdmins" AS "e"
WHERE "e"."EventId" = @__eventId_0
2025-11-18 23:22:48.767 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.UserResponseDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:48.768 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api) in 1.5521ms
2025-11-18 23:22:48.768 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:22:48.768 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 200 null application/json; charset=utf-8 3.1577ms
2025-11-18 23:22:53.202 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:22:53.202 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:22:53.203 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.203 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.203 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 1.1414ms
2025-11-18 23:22:53.203 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 1.0137ms
2025-11-18 23:22:53.205 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:22:53.205 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:22:53.205 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.205 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.206 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:22:53.206 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:22:53.208 +08:00 [INF] Route matched with {action = "List", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.NotificationDto]]] List() on controller ASG.Api.Controllers.NotificationsController (ASG.Api).
2025-11-18 23:22:53.209 +08:00 [INF] Route matched with {action = "GetConversations", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.ConversationDto]]] GetConversations() on controller ASG.Api.Controllers.MessagesController (ASG.Api).
2025-11-18 23:22:53.218 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."UserId", "n"."Type", "n"."Payload", "n"."IsRead", "n"."CreatedAt"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:22:53.219 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.NotificationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:53.220 +08:00 [INF] Executed action ASG.Api.Controllers.NotificationsController.List (ASG.Api) in 11.7191ms
2025-11-18 23:22:53.220 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."ConversationId"
FROM "ConversationMembers" AS "c"
WHERE "c"."UserId" = @__userId_0 AND NOT ("c"."IsDeleted")
2025-11-18 23:22:53.221 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:22:53.221 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 200 null application/json; charset=utf-8 16.8754ms
2025-11-18 23:22:53.234 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsDirect"
FROM "Conversations" AS "c"
WHERE "c"."Id" IN (
    SELECT "c0"."value"
    FROM json_each(@__convIds_0) AS "c0"
)
2025-11-18 23:22:53.242 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."UserId"
FROM "ConversationMembers" AS "c"
WHERE "c"."ConversationId" = @__c_Id_0
2025-11-18 23:22:53.245 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__peerId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__peerId_0
LIMIT 1
2025-11-18 23:22:53.250 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."Content", "m"."ConversationId", "m"."CreatedAt", "m"."IsRead", "m"."ReadAt", "m"."SenderUserId"
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0
ORDER BY "m"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:22:53.260 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__8__locals1_userId_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0 AND "m"."SenderUserId" <> @__8__locals1_userId_1 AND NOT ("m"."IsRead")
2025-11-18 23:22:53.264 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."CreatedAt", "n"."IsRead", "n"."Payload", "n"."Type", "n"."UserId"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT 1
2025-11-18 23:22:53.273 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0 AND NOT ("n"."IsRead")
2025-11-18 23:22:53.274 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.OrderedEnumerable`2[[ASG.Api.DTOs.ConversationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:22:53.276 +08:00 [INF] Executed action ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api) in 67.3948ms
2025-11-18 23:22:53.277 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:22:53.277 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 200 null application/json; charset=utf-8 72.1684ms
2025-11-18 23:22:53.356 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - application/json null
2025-11-18 23:22:53.356 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.357 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:22:53.357 +08:00 [INF] Route matched with {action = "GetEvent", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.EventDto]] GetEvent(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:53.359 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:53.360 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.EventDto'.
2025-11-18 23:22:53.360 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEvent (ASG.Api) in 2.93ms
2025-11-18 23:22:53.361 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:22:53.361 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 200 null application/json; charset=utf-8 5.0545ms
2025-11-18 23:22:53.372 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - application/json null
2025-11-18 23:22:53.372 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.373 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:22:53.373 +08:00 [INF] Route matched with {action = "GetEventRegistrations", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.TeamEventDto]]] GetEventRegistrations(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:53.374 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
FROM "TeamEvents" AS "t"
INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
INNER JOIN "Events" AS "e" ON "t"."EventId" = "e"."Id"
WHERE "t"."EventId" = @__eventId_0
ORDER BY "t"."RegistrationTime"
2025-11-18 23:22:53.376 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:22:53.377 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:22:53.378 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-11-18 23:22:53.378 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.TeamEvent, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.TeamEventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:53.379 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api) in 5.1795ms
2025-11-18 23:22:53.379 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:22:53.379 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 200 null application/json; charset=utf-8 7.5419ms
2025-11-18 23:22:53.387 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - application/json null
2025-11-18 23:22:53.387 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:22:53.387 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:22:53.388 +08:00 [INF] Route matched with {action = "GetEventAdmins", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.UserResponseDto]]] GetEventAdmins(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:22:53.389 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."UserId"
FROM "EventAdmins" AS "e"
WHERE "e"."EventId" = @__eventId_0
2025-11-18 23:22:53.389 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.UserResponseDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:22:53.390 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api) in 1.7312ms
2025-11-18 23:22:53.390 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:22:53.390 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 200 null application/json; charset=utf-8 3.6168ms
2025-11-18 23:23:09.835 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:23:09.835 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:23:09.835 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 0.8368ms
2025-11-18 23:23:09.838 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 39
2025-11-18 23:23:09.838 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:23:09.839 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:23:09.839 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:23:09.840 +08:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:23:09.841 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 1.7098ms
2025-11-18 23:23:09.842 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:23:09.842 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 429 null application/json; charset=utf-8 3.734ms
2025-11-18 23:23:30.700 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:23:30.701 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:23:30.701 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 1.02ms
2025-11-18 23:23:30.704 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 39
2025-11-18 23:23:30.704 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:23:30.705 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:23:30.705 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:23:30.706 +08:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:23:30.706 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 1.174ms
2025-11-18 23:23:30.707 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:23:30.707 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 429 null application/json; charset=utf-8 3.1537ms
2025-11-18 23:23:48.112 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:23:48.112 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:23:48.113 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 0.9918ms
2025-11-18 23:23:48.114 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 39
2025-11-18 23:23:48.115 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:23:48.116 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:23:48.116 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:23:48.117 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:23:48.117 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:23:48.280 +08:00 [INF] Received HTTP response headers after 162.8286ms - 200
2025-11-18 23:23:48.281 +08:00 [INF] End processing HTTP request after 163.9047ms - 200
2025-11-18 23:23:50.384 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:23:50.385 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 2268.684ms
2025-11-18 23:23:50.385 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:23:50.385 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 2270.5952ms
2025-11-18 23:27:04.867 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:27:04.867 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:27:04.868 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:04.868 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:04.868 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 1.0251ms
2025-11-18 23:27:04.868 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 1.1375ms
2025-11-18 23:27:04.998 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - null null
2025-11-18 23:27:04.998 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:04.999 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 204 null null 1.1357ms
2025-11-18 23:27:05.007 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - null null
2025-11-18 23:27:05.008 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:05.008 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 204 null null 1.0921ms
2025-11-18 23:27:05.048 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - null null
2025-11-18 23:27:05.049 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:05.049 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 204 null null 0.8717ms
2025-11-18 23:27:09.662 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Users/profile - null null
2025-11-18 23:27:09.663 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.663 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Users/profile - 204 null null 1.1039ms
2025-11-18 23:27:09.665 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Users/profile - application/json null
2025-11-18 23:27:09.665 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.666 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.UsersController.GetProfile (ASG.Api)'
2025-11-18 23:27:09.666 +08:00 [INF] Route matched with {action = "GetProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller ASG.Api.Controllers.UsersController (ASG.Api).
2025-11-18 23:27:09.669 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:27:09.670 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.UserResponseDto'.
2025-11-18 23:27:09.670 +08:00 [INF] Executed action ASG.Api.Controllers.UsersController.GetProfile (ASG.Api) in 3.9723ms
2025-11-18 23:27:09.670 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.UsersController.GetProfile (ASG.Api)'
2025-11-18 23:27:09.670 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Users/profile - 200 null application/json; charset=utf-8 5.8369ms
2025-11-18 23:27:09.682 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - null null
2025-11-18 23:27:09.683 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.683 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 204 null null 0.8591ms
2025-11-18 23:27:09.685 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - application/json null
2025-11-18 23:27:09.685 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.685 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:27:09.686 +08:00 [INF] Route matched with {action = "GetTeam", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.TeamDto]] GetTeam(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:09.689 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t0"."Id0", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."CreatedAt0", "t0"."Email", "t0"."EmailConfirmed", "t0"."EmailCredits", "t0"."FirstName", "t0"."IsActive", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."Role", "t0"."SecurityStamp", "t0"."TeamId", "t0"."TwoFactorEnabled", "t0"."UpdatedAt0", "t0"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "u"."Id" AS "Id0", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt" AS "UpdatedAt0", "u"."UserName"
    FROM "Teams" AS "t"
    LEFT JOIN "Users" AS "u" ON "t"."Id" = "u"."TeamId"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."Id", "t0"."Id0"
2025-11-18 23:27:09.692 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.TeamDto'.
2025-11-18 23:27:09.692 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api) in 5.9383ms
2025-11-18 23:27:09.692 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:27:09.692 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 200 null application/json; charset=utf-8 7.7421ms
2025-11-18 23:27:09.705 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - null null
2025-11-18 23:27:09.706 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.706 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - 204 null null 0.6255ms
2025-11-18 23:27:09.707 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - application/json null
2025-11-18 23:27:09.708 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.708 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api)'
2025-11-18 23:27:09.709 +08:00 [INF] Route matched with {action = "GetTeamHonors", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetTeamHonors(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:09.710 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__teamId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM "Events" AS "e"
LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
LEFT JOIN "TeamEvents" AS "t0" ON "e"."Id" = "t0"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "e"."Id" = "e0"."EventId"
WHERE "e"."ChampionTeamId" = @__teamId_0
ORDER BY COALESCE("e"."CompetitionEndTime", "e"."CompetitionStartTime") DESC, "e"."Id", "t"."Id", "t0"."TeamId", "t0"."EventId", "e0"."EventId"
2025-11-18 23:27:09.711 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:27:09.711 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api) in 2.3064ms
2025-11-18 23:27:09.711 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api)'
2025-11-18 23:27:09.712 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - 200 null application/json; charset=utf-8 4.3409ms
2025-11-18 23:27:09.717 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/me/player - null null
2025-11-18 23:27:09.718 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.718 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/me/player - 204 null null 0.5586ms
2025-11-18 23:27:09.719 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/me/player - application/json null
2025-11-18 23:27:09.719 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:09.720 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api)'
2025-11-18 23:27:09.720 +08:00 [INF] Route matched with {action = "GetMyPlayer", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PlayerDto]] GetMyPlayer() on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:09.722 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId"
FROM "Players" AS "p"
WHERE "p"."UserId" = @__userId_0
LIMIT 1
2025-11-18 23:27:09.722 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PlayerDto'.
2025-11-18 23:27:09.723 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api) in 2.2071ms
2025-11-18 23:27:09.723 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api)'
2025-11-18 23:27:09.723 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/me/player - 200 null application/json; charset=utf-8 3.9018ms
2025-11-18 23:27:14.524 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - application/json null
2025-11-18 23:27:14.525 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:14.525 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:27:14.526 +08:00 [INF] Route matched with {action = "GetTeam", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.TeamDto]] GetTeam(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:14.527 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t0"."Id0", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."CreatedAt0", "t0"."Email", "t0"."EmailConfirmed", "t0"."EmailCredits", "t0"."FirstName", "t0"."IsActive", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."Role", "t0"."SecurityStamp", "t0"."TeamId", "t0"."TwoFactorEnabled", "t0"."UpdatedAt0", "t0"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "u"."Id" AS "Id0", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt" AS "UpdatedAt0", "u"."UserName"
    FROM "Teams" AS "t"
    LEFT JOIN "Users" AS "u" ON "t"."Id" = "u"."TeamId"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."Id", "t0"."Id0"
2025-11-18 23:27:14.529 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.TeamDto'.
2025-11-18 23:27:14.529 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api) in 2.7633ms
2025-11-18 23:27:14.529 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:27:14.529 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 200 null application/json; charset=utf-8 5.1675ms
2025-11-18 23:27:25.445 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - null null
2025-11-18 23:27:25.445 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:25.446 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 204 null null 1.0441ms
2025-11-18 23:27:25.448 +08:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - application/json 312
2025-11-18 23:27:25.448 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:25.449 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.UpdateTeam (ASG.Api)'
2025-11-18 23:27:25.452 +08:00 [INF] Route matched with {action = "UpdateTeam", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.TeamDto]] UpdateTeam(System.Guid, ASG.Api.DTOs.UpdateTeamDto) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:25.459 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t0"."Id0", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."CreatedAt0", "t0"."Email", "t0"."EmailConfirmed", "t0"."EmailCredits", "t0"."FirstName", "t0"."IsActive", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."Role", "t0"."SecurityStamp", "t0"."TeamId", "t0"."TwoFactorEnabled", "t0"."UpdatedAt0", "t0"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "u"."Id" AS "Id0", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt" AS "UpdatedAt0", "u"."UserName"
    FROM "Teams" AS "t"
    LEFT JOIN "Users" AS "u" ON "t"."Id" = "u"."TeamId"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."Id", "t0"."Id0"
2025-11-18 23:27:25.465 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 4), @__excludeId_Value_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Teams" AS "t"
    WHERE "t"."Name" = @__name_0 AND "t"."Id" <> @__excludeId_Value_1)
2025-11-18 23:27:25.493 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__entry_Entity_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Players" AS "p"
    WHERE "p"."Id" = @__entry_Entity_Id_0)
2025-11-18 23:27:25.494 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__entry_Entity_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Players" AS "p"
    WHERE "p"."Id" = @__entry_Entity_Id_0)
2025-11-18 23:27:25.527 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Players" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-18 23:27:25.530 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Players" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-18 23:27:25.530 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4), @p1='?' (DbType = DateTime), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Teams" SET "Name" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2 AND "UpdatedAt" = @p3
RETURNING 1;
2025-11-18 23:27:25.542 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t0"."Id0", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."CreatedAt0", "t0"."Email", "t0"."EmailConfirmed", "t0"."EmailCredits", "t0"."FirstName", "t0"."IsActive", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."Role", "t0"."SecurityStamp", "t0"."TeamId", "t0"."TwoFactorEnabled", "t0"."UpdatedAt0", "t0"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "u"."Id" AS "Id0", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt" AS "UpdatedAt0", "u"."UserName"
    FROM "Teams" AS "t"
    LEFT JOIN "Users" AS "u" ON "t"."Id" = "u"."TeamId"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."Id", "t0"."Id0"
2025-11-18 23:27:25.544 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.TeamDto'.
2025-11-18 23:27:25.544 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.UpdateTeam (ASG.Api) in 91.3474ms
2025-11-18 23:27:25.544 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.UpdateTeam (ASG.Api)'
2025-11-18 23:27:25.545 +08:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 200 null application/json; charset=utf-8 96.9023ms
2025-11-18 23:27:27.495 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Users/profile - null null
2025-11-18 23:27:27.495 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.495 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Users/profile - 204 null null 0.5137ms
2025-11-18 23:27:27.497 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Users/profile - application/json null
2025-11-18 23:27:27.497 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.498 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.UsersController.GetProfile (ASG.Api)'
2025-11-18 23:27:27.498 +08:00 [INF] Route matched with {action = "GetProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller ASG.Api.Controllers.UsersController (ASG.Api).
2025-11-18 23:27:27.499 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:27:27.500 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.UserResponseDto'.
2025-11-18 23:27:27.500 +08:00 [INF] Executed action ASG.Api.Controllers.UsersController.GetProfile (ASG.Api) in 1.9493ms
2025-11-18 23:27:27.500 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.UsersController.GetProfile (ASG.Api)'
2025-11-18 23:27:27.501 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Users/profile - 200 null application/json; charset=utf-8 4.0471ms
2025-11-18 23:27:27.504 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - application/json null
2025-11-18 23:27:27.505 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.505 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:27:27.506 +08:00 [INF] Route matched with {action = "GetTeam", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.TeamDto]] GetTeam(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:27.507 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t0"."Id0", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "t0"."AccessFailedCount", "t0"."ConcurrencyStamp", "t0"."CreatedAt0", "t0"."Email", "t0"."EmailConfirmed", "t0"."EmailCredits", "t0"."FirstName", "t0"."IsActive", "t0"."LastName", "t0"."LockoutEnabled", "t0"."LockoutEnd", "t0"."NormalizedEmail", "t0"."NormalizedUserName", "t0"."PasswordHash", "t0"."PhoneNumber", "t0"."PhoneNumberConfirmed", "t0"."Role", "t0"."SecurityStamp", "t0"."TeamId", "t0"."TwoFactorEnabled", "t0"."UpdatedAt0", "t0"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "u"."Id" AS "Id0", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt" AS "CreatedAt0", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt" AS "UpdatedAt0", "u"."UserName"
    FROM "Teams" AS "t"
    LEFT JOIN "Users" AS "u" ON "t"."Id" = "u"."TeamId"
    WHERE "t"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."Id", "t0"."Id0"
2025-11-18 23:27:27.509 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.TeamDto'.
2025-11-18 23:27:27.509 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api) in 2.9241ms
2025-11-18 23:27:27.509 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeam (ASG.Api)'
2025-11-18 23:27:27.510 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757 - 200 null application/json; charset=utf-8 5.2295ms
2025-11-18 23:27:27.524 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - null null
2025-11-18 23:27:27.524 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.525 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - 204 null null 0.6472ms
2025-11-18 23:27:27.526 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - application/json null
2025-11-18 23:27:27.526 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.527 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api)'
2025-11-18 23:27:27.527 +08:00 [INF] Route matched with {action = "GetTeamHonors", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetTeamHonors(System.Guid) on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:27.528 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__teamId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM "Events" AS "e"
LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
LEFT JOIN "TeamEvents" AS "t0" ON "e"."Id" = "t0"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "e"."Id" = "e0"."EventId"
WHERE "e"."ChampionTeamId" = @__teamId_0
ORDER BY COALESCE("e"."CompetitionEndTime", "e"."CompetitionStartTime") DESC, "e"."Id", "t"."Id", "t0"."TeamId", "t0"."EventId", "e0"."EventId"
2025-11-18 23:27:27.529 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:27:27.529 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api) in 1.9589ms
2025-11-18 23:27:27.530 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetTeamHonors (ASG.Api)'
2025-11-18 23:27:27.530 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/9978dc91-5a58-4102-bbd4-c9f01ee84757/honors - 200 null application/json; charset=utf-8 3.876ms
2025-11-18 23:27:27.535 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/me/player - null null
2025-11-18 23:27:27.536 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.536 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Teams/me/player - 204 null null 0.8123ms
2025-11-18 23:27:27.538 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Teams/me/player - application/json null
2025-11-18 23:27:27.538 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:27.538 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api)'
2025-11-18 23:27:27.539 +08:00 [INF] Route matched with {action = "GetMyPlayer", controller = "Teams"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PlayerDto]] GetMyPlayer() on controller ASG.Api.Controllers.TeamsController (ASG.Api).
2025-11-18 23:27:27.540 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId"
FROM "Players" AS "p"
WHERE "p"."UserId" = @__userId_0
LIMIT 1
2025-11-18 23:27:27.540 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PlayerDto'.
2025-11-18 23:27:27.540 +08:00 [INF] Executed action ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api) in 1.3001ms
2025-11-18 23:27:27.540 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.TeamsController.GetMyPlayer (ASG.Api)'
2025-11-18 23:27:27.541 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Teams/me/player - 200 null application/json; charset=utf-8 2.906ms
2025-11-18 23:27:41.786 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:27:41.786 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:41.787 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 0.8716ms
2025-11-18 23:27:41.789 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 41
2025-11-18 23:27:41.789 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:27:41.790 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:27:41.790 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:27:41.792 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:27:41.792 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:27:41.929 +08:00 [INF] Received HTTP response headers after 137.4687ms - 200
2025-11-18 23:27:41.930 +08:00 [INF] End processing HTTP request after 138.1545ms - 200
2025-11-18 23:27:45.921 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:27:45.921 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 4131.2005ms
2025-11-18 23:27:45.922 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:27:45.922 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 4133.0226ms
2025-11-18 23:32:17.700 +08:00 [INF] Application is shutting down...
2025-11-18 23:32:28.113 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-18 23:32:28.173 +08:00 [INF] WebApplication built successfully.
2025-11-18 23:32:28.241 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-18 23:32:28.241 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-18 23:32:28.674 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:32:28.679 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:32:28.684 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-18 23:32:28.689 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-11-18 23:32:28.700 +08:00 [INF] User profile is available. Using 'C:\Users\luolan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-18 23:32:28.777 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Events" AS "e")
2025-11-18 23:32:28.779 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Teams" AS "t")
2025-11-18 23:32:28.782 +08:00 [INF] Starting Kestrel...
2025-11-18 23:32:28.829 +08:00 [INF] Database backup saved to /var/backups/asg\ASGApiDb_20251118_233228.db
2025-11-18 23:32:28.860 +08:00 [INF] Now listening on: http://localhost:5250
2025-11-18 23:32:28.861 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-18 23:32:28.861 +08:00 [INF] Hosting environment: Development
2025-11-18 23:32:28.861 +08:00 [INF] Content root path: C:\Users\luolan\ASG\ASG.Api
2025-11-18 23:32:35.604 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:32:35.631 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:32:35.634 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 30.028ms
2025-11-18 23:32:35.637 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 41
2025-11-18 23:32:35.640 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:32:35.740 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:32:35.748 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:32:35.790 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:32:35.791 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:32:36.004 +08:00 [INF] Received HTTP response headers after 211.7733ms - 200
2025-11-18 23:32:36.005 +08:00 [INF] End processing HTTP request after 216.7763ms - 200
2025-11-18 23:32:40.769 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:32:40.775 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 5024.873ms
2025-11-18 23:32:40.776 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:32:40.779 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 5142.3508ms
2025-11-18 23:35:01.534 +08:00 [INF] Application is shutting down...
2025-11-18 23:35:09.277 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-18 23:35:09.335 +08:00 [INF] WebApplication built successfully.
2025-11-18 23:35:09.402 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-18 23:35:09.402 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-18 23:35:09.833 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:35:09.838 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:35:09.844 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-18 23:35:09.849 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-11-18 23:35:09.861 +08:00 [INF] User profile is available. Using 'C:\Users\luolan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-18 23:35:09.942 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Events" AS "e")
2025-11-18 23:35:09.945 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Teams" AS "t")
2025-11-18 23:35:09.948 +08:00 [INF] Starting Kestrel...
2025-11-18 23:35:09.986 +08:00 [INF] Database backup saved to /var/backups/asg\ASGApiDb_20251118_233509.db
2025-11-18 23:35:10.018 +08:00 [INF] Now listening on: http://localhost:5250
2025-11-18 23:35:10.019 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-18 23:35:10.019 +08:00 [INF] Hosting environment: Development
2025-11-18 23:35:10.019 +08:00 [INF] Content root path: C:\Users\luolan\ASG\ASG.Api
2025-11-18 23:35:12.917 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:35:12.947 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:35:12.951 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 33.9101ms
2025-11-18 23:35:12.953 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 46
2025-11-18 23:35:12.956 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:35:13.066 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:35:13.075 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:35:13.121 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:35:13.122 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:35:13.351 +08:00 [INF] Received HTTP response headers after 227.001ms - 200
2025-11-18 23:35:13.352 +08:00 [INF] End processing HTTP request after 232.46ms - 200
2025-11-18 23:35:16.136 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:35:16.143 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 3066.0142ms
2025-11-18 23:35:16.143 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:35:16.147 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 3193.9646ms
2025-11-18 23:37:43.989 +08:00 [INF] Application is shutting down...
2025-11-18 23:37:53.767 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-18 23:37:53.830 +08:00 [INF] WebApplication built successfully.
2025-11-18 23:37:53.898 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-18 23:37:53.898 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-18 23:37:54.347 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:37:54.353 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:37:54.358 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-18 23:37:54.363 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-11-18 23:37:54.375 +08:00 [INF] User profile is available. Using 'C:\Users\luolan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-18 23:37:54.457 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Events" AS "e")
2025-11-18 23:37:54.460 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Teams" AS "t")
2025-11-18 23:37:54.463 +08:00 [INF] Starting Kestrel...
2025-11-18 23:37:54.498 +08:00 [INF] Database backup saved to /var/backups/asg\ASGApiDb_20251118_233754.db
2025-11-18 23:37:54.530 +08:00 [INF] Now listening on: http://localhost:5250
2025-11-18 23:37:54.530 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-18 23:37:54.530 +08:00 [INF] Hosting environment: Development
2025-11-18 23:37:54.531 +08:00 [INF] Content root path: C:\Users\luolan\ASG\ASG.Api
2025-11-18 23:38:03.346 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:38:03.374 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:03.376 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 31.1204ms
2025-11-18 23:38:03.380 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 46
2025-11-18 23:38:03.384 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:03.482 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:38:03.490 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:38:03.532 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:38:03.533 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:38:03.744 +08:00 [INF] Received HTTP response headers after 208.7729ms - 200
2025-11-18 23:38:03.745 +08:00 [INF] End processing HTTP request after 214.2972ms - 200
2025-11-18 23:38:06.843 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (Size = 6), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:38:06.962 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:38:07.018 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Teams" SET "Likes" = @p0
WHERE "Id" = @p1 AND "UpdatedAt" = @p2
RETURNING 1;
2025-11-18 23:38:07.043 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:38:07.053 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 3560.346ms
2025-11-18 23:38:07.054 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:38:07.058 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 3677.521ms
2025-11-18 23:38:27.971 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - null null
2025-11-18 23:38:27.972 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - null null
2025-11-18 23:38:27.973 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.972 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events - null null
2025-11-18 23:38:27.972 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming - null null
2025-11-18 23:38:27.973 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.973 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - 204 null null 2.5434ms
2025-11-18 23:38:27.974 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.974 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events - 204 null null 1.0821ms
2025-11-18 23:38:27.974 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.974 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - 204 null null 1.778ms
2025-11-18 23:38:27.975 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/upcoming - 204 null null 2.3425ms
2025-11-18 23:38:27.977 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - application/json null
2025-11-18 23:38:27.977 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events - application/json null
2025-11-18 23:38:27.977 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - application/json null
2025-11-18 23:38:27.977 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/upcoming - application/json null
2025-11-18 23:38:27.978 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.978 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.978 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.979 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:27.980 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api)'
2025-11-18 23:38:27.980 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api)'
2025-11-18 23:38:27.982 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api)'
2025-11-18 23:38:27.982 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api)'
2025-11-18 23:38:27.983 +08:00 [INF] Route matched with {action = "GetAllEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetAllEvents() on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:27.983 +08:00 [INF] Route matched with {action = "GetUpcomingEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.EventDto]]] GetUpcomingEvents() on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:27.985 +08:00 [INF] Route matched with {action = "GetUpcomingEventsPaged", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PagedResult`1[ASG.Api.DTOs.EventDto]]] GetUpcomingEventsPaged(Int32, Int32) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:27.985 +08:00 [INF] Route matched with {action = "GetActiveRegistrationEventsPaged", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.PagedResult`1[ASG.Api.DTOs.EventDto]]] GetActiveRegistrationEventsPaged(Int32, Int32) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:28.004 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId"
FROM "Events" AS "e"
LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "e"."Id" = "t1"."EventId"
ORDER BY "e"."CreatedAt" DESC, "e"."Id", "t"."Id", "t1"."TeamId", "t1"."EventId"
2025-11-18 23:38:28.005 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:38:28.011 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM "Events" AS "e"
LEFT JOIN (
    SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt" AS "InviteExpiresAt0", "t0"."InviteToken" AS "InviteToken0", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId"
    FROM "TeamEvents" AS "t"
    INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
) AS "t1" ON "e"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "e"."Id" = "e0"."EventId"
WHERE "e"."CompetitionStartTime" > @__now_0
ORDER BY "e"."CompetitionStartTime", "e"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:38:28.012 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:38:28.014 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:38:28.019 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."CompetitionStartTime" > @__now_0
    ORDER BY "e"."CompetitionStartTime"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t"."Id" = "e0"."EventId"
ORDER BY "t"."CompetitionStartTime", "t"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:38:28.021 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."Status" = 'RegistrationOpen' AND "e"."RegistrationStartTime" <= @__now_0 AND "e"."RegistrationEndTime" >= @__now_0
    ORDER BY "e"."RegistrationEndTime"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "t0"."TeamId", "t0"."EventId", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Notes", "t0"."RegisteredByUserId", "t0"."RegistrationTime", "t0"."Status", "t2"."Id", "t2"."CreatedAt", "t2"."Description", "t2"."InviteExpiresAt" AS "InviteExpiresAt0", "t2"."InviteToken" AS "InviteToken0", "t2"."Likes", "t2"."Name", "t2"."OwnerId", "t2"."Password", "t2"."QqNumber", "t2"."UpdatedAt", "t2"."UserId"
    FROM "TeamEvents" AS "t0"
    INNER JOIN "Teams" AS "t2" ON "t0"."TeamId" = "t2"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t"."Id" = "e0"."EventId"
ORDER BY "t"."RegistrationEndTime", "t"."Id", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:38:28.044 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."Status" = 'RegistrationOpen' AND "e"."RegistrationStartTime" <= @__now_0 AND "e"."RegistrationEndTime" >= @__now_0
2025-11-18 23:38:28.046 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PagedResult`1[[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:28.046 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:28.050 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.Event, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:28.051 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."CompetitionStartTime" > @__now_0
2025-11-18 23:38:28.052 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.PagedResult`1[[ASG.Api.DTOs.EventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:28.069 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api) in 85.3099ms
2025-11-18 23:38:28.070 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api) in 84.37ms
2025-11-18 23:38:28.070 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEvents (ASG.Api)'
2025-11-18 23:38:28.070 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api) in 84.0401ms
2025-11-18 23:38:28.069 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api) in 85.7654ms
2025-11-18 23:38:28.070 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetUpcomingEventsPaged (ASG.Api)'
2025-11-18 23:38:28.071 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetActiveRegistrationEventsPaged (ASG.Api)'
2025-11-18 23:38:28.071 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetAllEvents (ASG.Api)'
2025-11-18 23:38:28.071 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/upcoming - 200 null application/json; charset=utf-8 93.2801ms
2025-11-18 23:38:28.071 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events - 200 null application/json; charset=utf-8 94.2319ms
2025-11-18 23:38:28.073 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/active-registration/paged?page=1&pageSize=12 - 200 null application/json; charset=utf-8 95.9046ms
2025-11-18 23:38:28.073 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/upcoming/paged?page=1&pageSize=12 - 200 null application/json; charset=utf-8 95.6237ms
2025-11-18 23:38:31.616 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - null null
2025-11-18 23:38:31.617 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:31.617 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 204 null null 1.1072ms
2025-11-18 23:38:31.625 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - application/json null
2025-11-18 23:38:31.625 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:31.626 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:38:31.629 +08:00 [INF] Route matched with {action = "GetEvent", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ASG.Api.DTOs.EventDto]] GetEvent(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:31.643 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-18 23:38:31.649 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:38:31.651 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.EventDto'.
2025-11-18 23:38:31.652 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEvent (ASG.Api) in 22.3436ms
2025-11-18 23:38:31.652 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEvent (ASG.Api)'
2025-11-18 23:38:31.652 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57 - 200 null application/json; charset=utf-8 27.8105ms
2025-11-18 23:38:31.657 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - null null
2025-11-18 23:38:31.657 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:31.658 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 204 null null 1.0723ms
2025-11-18 23:38:31.659 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - application/json null
2025-11-18 23:38:31.660 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:31.661 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:38:31.663 +08:00 [INF] Route matched with {action = "GetEventRegistrations", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.TeamEventDto]]] GetEventRegistrations(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:31.673 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."TeamId", "t"."EventId", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Notes", "t"."RegisteredByUserId", "t"."RegistrationTime", "t"."Status", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
FROM "TeamEvents" AS "t"
INNER JOIN "Teams" AS "t0" ON "t"."TeamId" = "t0"."Id"
INNER JOIN "Events" AS "e" ON "t"."EventId" = "e"."Id"
WHERE "t"."EventId" = @__eventId_0
ORDER BY "t"."RegistrationTime"
2025-11-18 23:38:31.678 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."ChampionTeamId", "t0"."CompetitionEndTime", "t0"."CompetitionStartTime", "t0"."CreatedAt", "t0"."CreatedByUserId", "t0"."Description", "t0"."MaxTeams", "t0"."Name", "t0"."RegistrationEndTime", "t0"."RegistrationStartTime", "t0"."Status", "t0"."UpdatedAt", "t0"."Id0", "t0"."CreatedAt0", "t0"."Description0", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name0", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt0", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId", "e0"."EventId", "e0"."UserId", "e0"."AddedAt"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt", "t"."Id" AS "Id0", "t"."CreatedAt" AS "CreatedAt0", "t"."Description" AS "Description0", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name" AS "Name0", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt" AS "UpdatedAt0", "t"."UserId"
    FROM "Events" AS "e"
    LEFT JOIN "Teams" AS "t" ON "e"."ChampionTeamId" = "t"."Id"
    WHERE "e"."Id" = @__id_0
    LIMIT 1
) AS "t0"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t0"."Id" = "t1"."EventId"
LEFT JOIN "EventAdmins" AS "e0" ON "t0"."Id" = "e0"."EventId"
ORDER BY "t0"."Id", "t0"."Id0", "t1"."TeamId", "t1"."EventId", "t1"."Id", "e0"."EventId"
2025-11-18 23:38:31.686 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2025-11-18 23:38:31.693 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-11-18 23:38:31.694 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ASG.Api.Models.TeamEvent, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ASG.Api.DTOs.TeamEventDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:31.694 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api) in 31.0985ms
2025-11-18 23:38:31.695 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventRegistrations (ASG.Api)'
2025-11-18 23:38:31.695 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/registrations - 200 null application/json; charset=utf-8 35.5504ms
2025-11-18 23:38:31.699 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - null null
2025-11-18 23:38:31.700 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:31.700 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 204 null null 0.9826ms
2025-11-18 23:38:31.702 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - application/json null
2025-11-18 23:38:31.703 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:31.703 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:38:31.706 +08:00 [INF] Route matched with {action = "GetEventAdmins", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.UserResponseDto]]] GetEventAdmins(System.Guid) on controller ASG.Api.Controllers.EventsController (ASG.Api).
2025-11-18 23:38:31.711 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__eventId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."UserId"
FROM "EventAdmins" AS "e"
WHERE "e"."EventId" = @__eventId_0
2025-11-18 23:38:31.712 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.UserResponseDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:31.716 +08:00 [INF] Executed action ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api) in 8.9911ms
2025-11-18 23:38:31.716 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.EventsController.GetEventAdmins (ASG.Api)'
2025-11-18 23:38:31.717 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Events/2e537d6d-2fe7-4f04-b5d4-23a2d8a64d57/admins - 200 null application/json; charset=utf-8 14.5628ms
2025-11-18 23:38:51.188 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - null null
2025-11-18 23:38:51.189 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:51.189 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - 204 null null 1.055ms
2025-11-18 23:38:51.191 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - application/json null
2025-11-18 23:38:51.191 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:51.192 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.SearchController.Search (ASG.Api)'
2025-11-18 23:38:51.194 +08:00 [INF] Route matched with {action = "Search", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] Search(System.String, System.String, Int32, Int32) on controller ASG.Api.Controllers.SearchController (ASG.Api).
2025-11-18 23:38:51.198 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:38:51.200 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:38:51.214 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."Name" LIKE @__p_1 OR ("e"."Description" IS NOT NULL AND "e"."Description" LIKE @__p_1)
    ORDER BY "e"."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS "t"
LEFT JOIN "Teams" AS "t0" ON "t"."ChampionTeamId" = "t0"."Id"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
ORDER BY "t"."CreatedAt" DESC, "t"."Id", "t0"."Id", "t1"."TeamId", "t1"."EventId"
2025-11-18 23:38:51.219 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."Name" LIKE @__p_1 OR ("e"."Description" IS NOT NULL AND "e"."Description" LIKE @__p_1)
2025-11-18 23:38:51.235 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."AuthorUserId", "t"."ContentMarkdown", "t"."CreatedAt", "t"."Likes", "t"."Title", "t"."UpdatedAt", "t"."Views", "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "c"."Id", "c"."ArticleId", "c"."AuthorUserId", "c"."Content", "c"."CreatedAt", "c"."ParentId"
FROM (
    SELECT "a"."Id", "a"."AuthorUserId", "a"."ContentMarkdown", "a"."CreatedAt", "a"."Likes", "a"."Title", "a"."UpdatedAt", "a"."Views"
    FROM "Articles" AS "a"
    WHERE "a"."Title" LIKE @__p_1 OR "a"."ContentMarkdown" LIKE @__p_1
    ORDER BY "a"."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."AuthorUserId" = "u"."Id"
LEFT JOIN "Teams" AS "t0" ON "u"."TeamId" = "t0"."Id"
LEFT JOIN "Comments" AS "c" ON "t"."Id" = "c"."ArticleId"
ORDER BY "t"."CreatedAt" DESC, "t"."Id", "u"."Id", "t0"."Id"
2025-11-18 23:38:51.239 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Articles" AS "a"
WHERE "a"."Title" LIKE @__p_1 OR "a"."ContentMarkdown" LIKE @__p_1
2025-11-18 23:38:51.240 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.SearchAggregateDto'.
2025-11-18 23:38:51.245 +08:00 [INF] Executed action ASG.Api.Controllers.SearchController.Search (ASG.Api) in 50.7573ms
2025-11-18 23:38:51.246 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.SearchController.Search (ASG.Api)'
2025-11-18 23:38:51.246 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - 200 null application/json; charset=utf-8 55.2413ms
2025-11-18 23:38:58.395 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:38:58.396 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:38:58.396 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:58.396 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:58.396 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 1.0119ms
2025-11-18 23:38:58.396 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 0.9698ms
2025-11-18 23:38:58.399 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:38:58.400 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:38:58.400 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:58.401 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:38:58.403 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:38:58.404 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:38:58.406 +08:00 [INF] Route matched with {action = "GetConversations", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.ConversationDto]]] GetConversations() on controller ASG.Api.Controllers.MessagesController (ASG.Api).
2025-11-18 23:38:58.406 +08:00 [INF] Route matched with {action = "List", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.NotificationDto]]] List() on controller ASG.Api.Controllers.NotificationsController (ASG.Api).
2025-11-18 23:38:58.414 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."UserId", "n"."Type", "n"."Payload", "n"."IsRead", "n"."CreatedAt"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:38:58.415 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.NotificationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:38:58.415 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."ConversationId"
FROM "ConversationMembers" AS "c"
WHERE "c"."UserId" = @__userId_0 AND NOT ("c"."IsDeleted")
2025-11-18 23:38:58.416 +08:00 [INF] Executed action ASG.Api.Controllers.NotificationsController.List (ASG.Api) in 9.9945ms
2025-11-18 23:38:58.417 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:38:58.417 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 200 null application/json; charset=utf-8 17.5905ms
2025-11-18 23:38:58.432 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsDirect"
FROM "Conversations" AS "c"
WHERE "c"."Id" IN (
    SELECT "c0"."value"
    FROM json_each(@__convIds_0) AS "c0"
)
2025-11-18 23:38:58.441 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."UserId"
FROM "ConversationMembers" AS "c"
WHERE "c"."ConversationId" = @__c_Id_0
2025-11-18 23:38:58.445 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__peerId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__peerId_0
LIMIT 1
2025-11-18 23:38:58.449 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."Content", "m"."ConversationId", "m"."CreatedAt", "m"."IsRead", "m"."ReadAt", "m"."SenderUserId"
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0
ORDER BY "m"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:38:58.459 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__8__locals1_userId_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0 AND "m"."SenderUserId" <> @__8__locals1_userId_1 AND NOT ("m"."IsRead")
2025-11-18 23:38:58.463 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."CreatedAt", "n"."IsRead", "n"."Payload", "n"."Type", "n"."UserId"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT 1
2025-11-18 23:38:58.474 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0 AND NOT ("n"."IsRead")
2025-11-18 23:38:58.475 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.OrderedEnumerable`2[[ASG.Api.DTOs.ConversationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:38:58.477 +08:00 [INF] Executed action ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api) in 70.8373ms
2025-11-18 23:38:58.477 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:38:58.478 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 200 null application/json; charset=utf-8 78.213ms
2025-11-18 23:39:44.563 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - null null
2025-11-18 23:39:44.564 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:39:44.564 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - 204 null null 0.9468ms
2025-11-18 23:39:44.566 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - application/json null
2025-11-18 23:39:44.566 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:39:44.567 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.SearchController.Search (ASG.Api)'
2025-11-18 23:39:44.567 +08:00 [INF] Route matched with {action = "Search", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] Search(System.String, System.String, Int32, Int32) on controller ASG.Api.Controllers.SearchController (ASG.Api).
2025-11-18 23:39:44.570 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:39:44.572 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:39:44.573 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."Name" LIKE @__p_1 OR ("e"."Description" IS NOT NULL AND "e"."Description" LIKE @__p_1)
    ORDER BY "e"."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS "t"
LEFT JOIN "Teams" AS "t0" ON "t"."ChampionTeamId" = "t0"."Id"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
ORDER BY "t"."CreatedAt" DESC, "t"."Id", "t0"."Id", "t1"."TeamId", "t1"."EventId"
2025-11-18 23:39:44.575 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."Name" LIKE @__p_1 OR ("e"."Description" IS NOT NULL AND "e"."Description" LIKE @__p_1)
2025-11-18 23:39:44.577 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."AuthorUserId", "t"."ContentMarkdown", "t"."CreatedAt", "t"."Likes", "t"."Title", "t"."UpdatedAt", "t"."Views", "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "c"."Id", "c"."ArticleId", "c"."AuthorUserId", "c"."Content", "c"."CreatedAt", "c"."ParentId"
FROM (
    SELECT "a"."Id", "a"."AuthorUserId", "a"."ContentMarkdown", "a"."CreatedAt", "a"."Likes", "a"."Title", "a"."UpdatedAt", "a"."Views"
    FROM "Articles" AS "a"
    WHERE "a"."Title" LIKE @__p_1 OR "a"."ContentMarkdown" LIKE @__p_1
    ORDER BY "a"."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."AuthorUserId" = "u"."Id"
LEFT JOIN "Teams" AS "t0" ON "u"."TeamId" = "t0"."Id"
LEFT JOIN "Comments" AS "c" ON "t"."Id" = "c"."ArticleId"
ORDER BY "t"."CreatedAt" DESC, "t"."Id", "u"."Id", "t0"."Id"
2025-11-18 23:39:44.578 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Articles" AS "a"
WHERE "a"."Title" LIKE @__p_1 OR "a"."ContentMarkdown" LIKE @__p_1
2025-11-18 23:39:44.579 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.SearchAggregateDto'.
2025-11-18 23:39:44.579 +08:00 [INF] Executed action ASG.Api.Controllers.SearchController.Search (ASG.Api) in 11.7804ms
2025-11-18 23:39:44.580 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.SearchController.Search (ASG.Api)'
2025-11-18 23:39:44.580 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - 200 null application/json; charset=utf-8 13.6752ms
2025-11-18 23:40:01.955 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:40:01.955 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:01.955 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 0.7149ms
2025-11-18 23:40:01.958 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 54
2025-11-18 23:40:01.958 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:01.959 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:40:01.959 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:40:01.961 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:40:01.962 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:40:02.244 +08:00 [INF] Received HTTP response headers after 282.2492ms - 200
2025-11-18 23:40:02.245 +08:00 [INF] End processing HTTP request after 283.3129ms - 200
2025-11-18 23:40:03.856 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:40:03.859 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:40:03.860 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Teams" SET "Likes" = @p0
WHERE "Id" = @p1 AND "UpdatedAt" = @p2
RETURNING 1;
2025-11-18 23:40:03.861 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:40:03.861 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 1901.8429ms
2025-11-18 23:40:03.862 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:40:03.862 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 1904.2053ms
2025-11-18 23:40:11.054 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:40:11.054 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:11.055 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 1.3276ms
2025-11-18 23:40:11.058 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:40:11.059 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:11.059 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 0.79ms
2025-11-18 23:40:11.062 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:40:11.062 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:11.064 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:40:11.065 +08:00 [INF] Route matched with {action = "List", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.NotificationDto]]] List() on controller ASG.Api.Controllers.NotificationsController (ASG.Api).
2025-11-18 23:40:11.067 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."UserId", "n"."Type", "n"."Payload", "n"."IsRead", "n"."CreatedAt"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:40:11.067 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:40:11.067 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.NotificationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:40:11.068 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:11.068 +08:00 [INF] Executed action ASG.Api.Controllers.NotificationsController.List (ASG.Api) in 3.3483ms
2025-11-18 23:40:11.068 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:40:11.069 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:40:11.069 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 200 null application/json; charset=utf-8 6.8458ms
2025-11-18 23:40:11.069 +08:00 [INF] Route matched with {action = "GetConversations", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.ConversationDto]]] GetConversations() on controller ASG.Api.Controllers.MessagesController (ASG.Api).
2025-11-18 23:40:11.071 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."ConversationId"
FROM "ConversationMembers" AS "c"
WHERE "c"."UserId" = @__userId_0 AND NOT ("c"."IsDeleted")
2025-11-18 23:40:11.072 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsDirect"
FROM "Conversations" AS "c"
WHERE "c"."Id" IN (
    SELECT "c0"."value"
    FROM json_each(@__convIds_0) AS "c0"
)
2025-11-18 23:40:11.073 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."UserId"
FROM "ConversationMembers" AS "c"
WHERE "c"."ConversationId" = @__c_Id_0
2025-11-18 23:40:11.073 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__peerId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__peerId_0
LIMIT 1
2025-11-18 23:40:11.075 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."Content", "m"."ConversationId", "m"."CreatedAt", "m"."IsRead", "m"."ReadAt", "m"."SenderUserId"
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0
ORDER BY "m"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:40:11.076 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__8__locals1_userId_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0 AND "m"."SenderUserId" <> @__8__locals1_userId_1 AND NOT ("m"."IsRead")
2025-11-18 23:40:11.076 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."CreatedAt", "n"."IsRead", "n"."Payload", "n"."Type", "n"."UserId"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT 1
2025-11-18 23:40:11.077 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0 AND NOT ("n"."IsRead")
2025-11-18 23:40:11.078 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.OrderedEnumerable`2[[ASG.Api.DTOs.ConversationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:40:11.078 +08:00 [INF] Executed action ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api) in 8.8893ms
2025-11-18 23:40:11.079 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:40:11.079 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 200 null application/json; charset=utf-8 11.9318ms
2025-11-18 23:40:15.046 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - null null
2025-11-18 23:40:15.047 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:15.047 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - 204 null null 1.0145ms
2025-11-18 23:40:15.049 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - application/json null
2025-11-18 23:40:15.050 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:40:15.050 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.SearchController.Search (ASG.Api)'
2025-11-18 23:40:15.051 +08:00 [INF] Route matched with {action = "Search", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] Search(System.String, System.String, Int32, Int32) on controller ASG.Api.Controllers.SearchController (ASG.Api).
2025-11-18 23:40:15.053 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:40:15.054 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:40:15.056 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ChampionTeamId", "t"."CompetitionEndTime", "t"."CompetitionStartTime", "t"."CreatedAt", "t"."CreatedByUserId", "t"."Description", "t"."MaxTeams", "t"."Name", "t"."RegistrationEndTime", "t"."RegistrationStartTime", "t"."Status", "t"."UpdatedAt", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "t1"."TeamId", "t1"."EventId", "t1"."InviteExpiresAt", "t1"."InviteToken", "t1"."Notes", "t1"."RegisteredByUserId", "t1"."RegistrationTime", "t1"."Status", "t1"."Id", "t1"."CreatedAt", "t1"."Description", "t1"."InviteExpiresAt0", "t1"."InviteToken0", "t1"."Likes", "t1"."Name", "t1"."OwnerId", "t1"."Password", "t1"."QqNumber", "t1"."UpdatedAt", "t1"."UserId"
FROM (
    SELECT "e"."Id", "e"."ChampionTeamId", "e"."CompetitionEndTime", "e"."CompetitionStartTime", "e"."CreatedAt", "e"."CreatedByUserId", "e"."Description", "e"."MaxTeams", "e"."Name", "e"."RegistrationEndTime", "e"."RegistrationStartTime", "e"."Status", "e"."UpdatedAt"
    FROM "Events" AS "e"
    WHERE "e"."Name" LIKE @__p_1 OR ("e"."Description" IS NOT NULL AND "e"."Description" LIKE @__p_1)
    ORDER BY "e"."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS "t"
LEFT JOIN "Teams" AS "t0" ON "t"."ChampionTeamId" = "t0"."Id"
LEFT JOIN (
    SELECT "t2"."TeamId", "t2"."EventId", "t2"."InviteExpiresAt", "t2"."InviteToken", "t2"."Notes", "t2"."RegisteredByUserId", "t2"."RegistrationTime", "t2"."Status", "t3"."Id", "t3"."CreatedAt", "t3"."Description", "t3"."InviteExpiresAt" AS "InviteExpiresAt0", "t3"."InviteToken" AS "InviteToken0", "t3"."Likes", "t3"."Name", "t3"."OwnerId", "t3"."Password", "t3"."QqNumber", "t3"."UpdatedAt", "t3"."UserId"
    FROM "TeamEvents" AS "t2"
    INNER JOIN "Teams" AS "t3" ON "t2"."TeamId" = "t3"."Id"
) AS "t1" ON "t"."Id" = "t1"."EventId"
ORDER BY "t"."CreatedAt" DESC, "t"."Id", "t0"."Id", "t1"."TeamId", "t1"."EventId"
2025-11-18 23:40:15.058 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Events" AS "e"
WHERE "e"."Name" LIKE @__p_1 OR ("e"."Description" IS NOT NULL AND "e"."Description" LIKE @__p_1)
2025-11-18 23:40:15.059 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."AuthorUserId", "t"."ContentMarkdown", "t"."CreatedAt", "t"."Likes", "t"."Title", "t"."UpdatedAt", "t"."Views", "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName", "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "c"."Id", "c"."ArticleId", "c"."AuthorUserId", "c"."Content", "c"."CreatedAt", "c"."ParentId"
FROM (
    SELECT "a"."Id", "a"."AuthorUserId", "a"."ContentMarkdown", "a"."CreatedAt", "a"."Likes", "a"."Title", "a"."UpdatedAt", "a"."Views"
    FROM "Articles" AS "a"
    WHERE "a"."Title" LIKE @__p_1 OR "a"."ContentMarkdown" LIKE @__p_1
    ORDER BY "a"."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."AuthorUserId" = "u"."Id"
LEFT JOIN "Teams" AS "t0" ON "u"."TeamId" = "t0"."Id"
LEFT JOIN "Comments" AS "c" ON "t"."Id" = "c"."ArticleId"
ORDER BY "t"."CreatedAt" DESC, "t"."Id", "u"."Id", "t0"."Id"
2025-11-18 23:40:15.060 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Articles" AS "a"
WHERE "a"."Title" LIKE @__p_1 OR "a"."ContentMarkdown" LIKE @__p_1
2025-11-18 23:40:15.060 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.SearchAggregateDto'.
2025-11-18 23:40:15.061 +08:00 [INF] Executed action ASG.Api.Controllers.SearchController.Search (ASG.Api) in 9.9117ms
2025-11-18 23:40:15.061 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.SearchController.Search (ASG.Api)'
2025-11-18 23:40:15.061 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Search?type=all&query=%E5%B8%85%E5%93%A5&page=1&pageSize=12 - 200 null application/json; charset=utf-8 11.713ms
2025-11-18 23:47:36.461 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:47:36.461 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:47:36.462 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:47:36.462 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:47:36.462 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 0.9539ms
2025-11-18 23:47:36.462 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 0.9482ms
2025-11-18 23:47:36.464 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:47:36.465 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:47:36.465 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:47:36.465 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:47:36.466 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:47:36.466 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:47:36.466 +08:00 [INF] Route matched with {action = "GetConversations", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.ConversationDto]]] GetConversations() on controller ASG.Api.Controllers.MessagesController (ASG.Api).
2025-11-18 23:47:36.466 +08:00 [INF] Route matched with {action = "List", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.NotificationDto]]] List() on controller ASG.Api.Controllers.NotificationsController (ASG.Api).
2025-11-18 23:47:36.470 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."ConversationId"
FROM "ConversationMembers" AS "c"
WHERE "c"."UserId" = @__userId_0 AND NOT ("c"."IsDeleted")
2025-11-18 23:47:36.471 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsDirect"
FROM "Conversations" AS "c"
WHERE "c"."Id" IN (
    SELECT "c0"."value"
    FROM json_each(@__convIds_0) AS "c0"
)
2025-11-18 23:47:36.472 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."UserId"
FROM "ConversationMembers" AS "c"
WHERE "c"."ConversationId" = @__c_Id_0
2025-11-18 23:47:36.472 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__peerId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__peerId_0
LIMIT 1
2025-11-18 23:47:36.474 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."Content", "m"."ConversationId", "m"."CreatedAt", "m"."IsRead", "m"."ReadAt", "m"."SenderUserId"
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0
ORDER BY "m"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:47:36.474 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__8__locals1_userId_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0 AND "m"."SenderUserId" <> @__8__locals1_userId_1 AND NOT ("m"."IsRead")
2025-11-18 23:47:36.475 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."CreatedAt", "n"."IsRead", "n"."Payload", "n"."Type", "n"."UserId"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT 1
2025-11-18 23:47:36.475 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0 AND NOT ("n"."IsRead")
2025-11-18 23:47:36.476 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.OrderedEnumerable`2[[ASG.Api.DTOs.ConversationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:47:36.476 +08:00 [INF] Executed action ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api) in 9.6942ms
2025-11-18 23:47:36.476 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:47:36.477 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 200 null application/json; charset=utf-8 11.9992ms
2025-11-18 23:47:36.624 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."UserId", "n"."Type", "n"."Payload", "n"."IsRead", "n"."CreatedAt"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:47:36.624 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.NotificationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:47:36.624 +08:00 [INF] Executed action ASG.Api.Controllers.NotificationsController.List (ASG.Api) in 157.7847ms
2025-11-18 23:47:36.625 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:47:36.625 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 200 null application/json; charset=utf-8 160.5276ms
2025-11-18 23:50:13.080 +08:00 [INF] Application is shutting down...
2025-11-18 23:50:20.722 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-18 23:50:20.783 +08:00 [INF] WebApplication built successfully.
2025-11-18 23:50:20.853 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-18 23:50:20.854 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-18 23:50:21.286 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:50:21.291 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-11-18 23:50:21.297 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-18 23:50:21.301 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-11-18 23:50:21.312 +08:00 [INF] User profile is available. Using 'C:\Users\luolan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-18 23:50:21.386 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Events" AS "e")
2025-11-18 23:50:21.389 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Teams" AS "t")
2025-11-18 23:50:21.392 +08:00 [INF] Starting Kestrel...
2025-11-18 23:50:21.428 +08:00 [INF] Database backup saved to /var/backups/asg\ASGApiDb_20251118_235021.db
2025-11-18 23:50:21.457 +08:00 [INF] Now listening on: http://localhost:5250
2025-11-18 23:50:21.457 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-18 23:50:21.457 +08:00 [INF] Hosting environment: Development
2025-11-18 23:50:21.458 +08:00 [INF] Content root path: C:\Users\luolan\ASG\ASG.Api
2025-11-18 23:50:35.167 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:50:35.167 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:50:35.199 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:50:35.199 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:50:35.202 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 35.6196ms
2025-11-18 23:50:35.202 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 35.6115ms
2025-11-18 23:50:35.210 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:50:35.210 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:50:35.213 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:50:35.213 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:50:35.426 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:50:35.426 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:50:35.434 +08:00 [INF] Route matched with {action = "List", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.NotificationDto]]] List() on controller ASG.Api.Controllers.NotificationsController (ASG.Api).
2025-11-18 23:50:35.434 +08:00 [INF] Route matched with {action = "GetConversations", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.ConversationDto]]] GetConversations() on controller ASG.Api.Controllers.MessagesController (ASG.Api).
2025-11-18 23:50:35.466 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 36), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."UserId", "n"."Type", "n"."Payload", "n"."IsRead", "n"."CreatedAt"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:50:35.466 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."ConversationId"
FROM "ConversationMembers" AS "c"
WHERE "c"."UserId" = @__userId_0 AND NOT ("c"."IsDeleted")
2025-11-18 23:50:35.473 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.NotificationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:50:35.488 +08:00 [INF] Executed action ASG.Api.Controllers.NotificationsController.List (ASG.Api) in 51.7662ms
2025-11-18 23:50:35.488 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:50:35.491 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 200 null application/json; charset=utf-8 281.5214ms
2025-11-18 23:50:35.509 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsDirect"
FROM "Conversations" AS "c"
WHERE "c"."Id" IN (
    SELECT "c0"."value"
    FROM json_each(@__convIds_0) AS "c0"
)
2025-11-18 23:50:35.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."UserId"
FROM "ConversationMembers" AS "c"
WHERE "c"."ConversationId" = @__c_Id_0
2025-11-18 23:50:35.542 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__peerId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__peerId_0
LIMIT 1
2025-11-18 23:50:35.585 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."Content", "m"."ConversationId", "m"."CreatedAt", "m"."IsRead", "m"."ReadAt", "m"."SenderUserId"
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0
ORDER BY "m"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:50:35.604 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__8__locals1_userId_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0 AND "m"."SenderUserId" <> @__8__locals1_userId_1 AND NOT ("m"."IsRead")
2025-11-18 23:50:35.608 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."CreatedAt", "n"."IsRead", "n"."Payload", "n"."Type", "n"."UserId"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT 1
2025-11-18 23:50:35.617 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0 AND NOT ("n"."IsRead")
2025-11-18 23:50:35.619 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.OrderedEnumerable`2[[ASG.Api.DTOs.ConversationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:50:35.624 +08:00 [INF] Executed action ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api) in 189.7876ms
2025-11-18 23:50:35.625 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:50:35.625 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 200 null application/json; charset=utf-8 415.4114ms
2025-11-18 23:51:57.300 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:51:57.301 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:51:57.302 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 1.2226ms
2025-11-18 23:51:57.303 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 123
2025-11-18 23:51:57.304 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:51:57.306 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:51:57.311 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:51:57.354 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:51:57.355 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:51:57.814 +08:00 [INF] Received HTTP response headers after 458.1229ms - 200
2025-11-18 23:51:57.815 +08:00 [INF] End processing HTTP request after 462.3511ms - 200
2025-11-18 23:51:59.588 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:51:59.624 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:51:59.627 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:51:59.634 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 2322.0181ms
2025-11-18 23:51:59.634 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:51:59.636 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 2332.8153ms
2025-11-18 23:52:27.447 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - null null
2025-11-18 23:52:27.448 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - null null
2025-11-18 23:52:27.448 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:52:27.448 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:52:27.449 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Notifications - 204 null null 1.5ms
2025-11-18 23:52:27.449 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Messages/conversations - 204 null null 1.3069ms
2025-11-18 23:52:27.451 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Notifications - application/json null
2025-11-18 23:52:27.451 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - application/json null
2025-11-18 23:52:27.451 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:52:27.452 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:52:27.454 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:52:27.454 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:52:27.454 +08:00 [INF] Route matched with {action = "List", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.NotificationDto]]] List() on controller ASG.Api.Controllers.NotificationsController (ASG.Api).
2025-11-18 23:52:27.454 +08:00 [INF] Route matched with {action = "GetConversations", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ASG.Api.DTOs.ConversationDto]]] GetConversations() on controller ASG.Api.Controllers.MessagesController (ASG.Api).
2025-11-18 23:52:27.458 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."ConversationId"
FROM "ConversationMembers" AS "c"
WHERE "c"."UserId" = @__userId_0 AND NOT ("c"."IsDeleted")
2025-11-18 23:52:27.458 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."UserId", "n"."Type", "n"."Payload", "n"."IsRead", "n"."CreatedAt"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:52:27.459 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ASG.Api.DTOs.NotificationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-18 23:52:27.459 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsDirect"
FROM "Conversations" AS "c"
WHERE "c"."Id" IN (
    SELECT "c0"."value"
    FROM json_each(@__convIds_0) AS "c0"
)
2025-11-18 23:52:27.459 +08:00 [INF] Executed action ASG.Api.Controllers.NotificationsController.List (ASG.Api) in 4.8553ms
2025-11-18 23:52:27.460 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.NotificationsController.List (ASG.Api)'
2025-11-18 23:52:27.460 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."UserId"
FROM "ConversationMembers" AS "c"
WHERE "c"."ConversationId" = @__c_Id_0
2025-11-18 23:52:27.460 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Notifications - 200 null application/json; charset=utf-8 9.3511ms
2025-11-18 23:52:27.461 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__peerId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__peerId_0
LIMIT 1
2025-11-18 23:52:27.462 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."Content", "m"."ConversationId", "m"."CreatedAt", "m"."IsRead", "m"."ReadAt", "m"."SenderUserId"
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0
ORDER BY "m"."CreatedAt" DESC
LIMIT @__p_1
2025-11-18 23:52:27.463 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Guid), @__8__locals1_userId_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Messages" AS "m"
WHERE "m"."ConversationId" = @__c_Id_0 AND "m"."SenderUserId" <> @__8__locals1_userId_1 AND NOT ("m"."IsRead")
2025-11-18 23:52:27.464 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."Id", "n"."CreatedAt", "n"."IsRead", "n"."Payload", "n"."Type", "n"."UserId"
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0
ORDER BY "n"."CreatedAt" DESC
LIMIT 1
2025-11-18 23:52:27.464 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Notifications" AS "n"
WHERE "n"."UserId" = @__userId_0 AND NOT ("n"."IsRead")
2025-11-18 23:52:27.465 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.OrderedEnumerable`2[[ASG.Api.DTOs.ConversationDto, ASG.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:52:27.466 +08:00 [INF] Executed action ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api) in 10.7338ms
2025-11-18 23:52:27.466 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.MessagesController.GetConversations (ASG.Api)'
2025-11-18 23:52:27.466 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5250/api/Messages/conversations - 200 null application/json; charset=utf-8 14.9992ms
2025-11-18 23:52:56.077 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:52:56.078 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:52:56.078 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 1.1442ms
2025-11-18 23:52:56.081 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 137
2025-11-18 23:52:56.081 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:52:56.081 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:52:56.082 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:52:56.084 +08:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-18 23:52:56.085 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 3.2759ms
2025-11-18 23:52:56.085 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:52:56.086 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 429 null application/json; charset=utf-8 5.0607ms
2025-11-18 23:53:23.560 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - null null
2025-11-18 23:53:23.560 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:53:23.561 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5250/api/Ai/command - 204 null null 1.2334ms
2025-11-18 23:53:23.563 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5250/api/Ai/command - application/json 137
2025-11-18 23:53:23.563 +08:00 [INF] CORS policy execution successful.
2025-11-18 23:53:23.564 +08:00 [INF] Executing endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:53:23.564 +08:00 [INF] Route matched with {action = "Command", controller = "Ai"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Command(ASG.Api.DTOs.AiCommandRequestDto) on controller ASG.Api.Controllers.AiController (ASG.Api).
2025-11-18 23:53:23.570 +08:00 [INF] Start processing HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:53:23.570 +08:00 [INF] Sending HTTP request POST https://api.deepseek.com/chat/completions
2025-11-18 23:53:23.714 +08:00 [INF] Received HTTP response headers after 143.5756ms - 200
2025-11-18 23:53:23.714 +08:00 [INF] End processing HTTP request after 144.423ms - 200
2025-11-18 23:53:25.761 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t0"."Id", "t0"."CreatedAt", "t0"."Description", "t0"."InviteExpiresAt", "t0"."InviteToken", "t0"."Likes", "t0"."Name", "t0"."OwnerId", "t0"."Password", "t0"."QqNumber", "t0"."UpdatedAt", "t0"."UserId", "u"."Id", "p"."Id", "p"."CreatedAt", "p"."Description", "p"."GameId", "p"."GameRank", "p"."Name", "p"."TeamId", "p"."UpdatedAt", "p"."UserId", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."CreatedAt", "u"."Email", "u"."EmailConfirmed", "u"."EmailCredits", "u"."FirstName", "u"."IsActive", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."Role", "u"."SecurityStamp", "u"."TeamId", "u"."TwoFactorEnabled", "u"."UpdatedAt", "u"."UserName"
FROM (
    SELECT "t"."Id", "t"."CreatedAt", "t"."Description", "t"."InviteExpiresAt", "t"."InviteToken", "t"."Likes", "t"."Name", "t"."OwnerId", "t"."Password", "t"."QqNumber", "t"."UpdatedAt", "t"."UserId"
    FROM "Teams" AS "t"
    WHERE "t"."Name" LIKE @__p_1
    ORDER BY "t"."CreatedAt"
    LIMIT @__p_3 OFFSET @__p_2
) AS "t0"
LEFT JOIN "Users" AS "u" ON "t0"."Id" = "u"."TeamId"
LEFT JOIN "Players" AS "p" ON "t0"."Id" = "p"."TeamId"
ORDER BY "t0"."CreatedAt", "t0"."Id", "u"."Id"
2025-11-18 23:53:25.764 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Teams" AS "t"
WHERE "t"."Name" LIKE @__p_1
2025-11-18 23:53:25.764 +08:00 [INF] Executing OkObjectResult, writing value of type 'ASG.Api.DTOs.AiCommandResponseDto'.
2025-11-18 23:53:25.765 +08:00 [INF] Executed action ASG.Api.Controllers.AiController.Command (ASG.Api) in 2200.7759ms
2025-11-18 23:53:25.765 +08:00 [INF] Executed endpoint 'ASG.Api.Controllers.AiController.Command (ASG.Api)'
2025-11-18 23:53:25.765 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5250/api/Ai/command - 200 null application/json; charset=utf-8 2202.7036ms
