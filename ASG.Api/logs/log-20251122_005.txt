2025-11-22 18:03:30.301 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-22 18:03:30.742 +08:00 [WRN] The foreign key property 'NeteaseHeroStat.HeroId1' was created in shadow state because a conflicting property with the simple name 'HeroId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-11-22 18:03:30.757 +08:00 [WRN] The 'PlayerRoleType' property 'RoleType' on entity type 'Player' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Unknown', since this is the CLR default for the 'PlayerRoleType' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-11-22 18:03:30.886 +08:00 [WRN] The foreign key property 'NeteaseHeroStat.HeroId1' was created in shadow state because a conflicting property with the simple name 'HeroId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-11-22 18:03:30.889 +08:00 [WRN] The 'PlayerRoleType' property 'RoleType' on entity type 'Player' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Unknown', since this is the CLR default for the 'PlayerRoleType' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-11-22 18:04:28.420 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-22 18:04:28.491 +08:00 [INF] WebApplication built successfully.
2025-11-22 18:04:28.577 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-22 18:04:28.577 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-22 18:04:29.008 +08:00 [WRN] The foreign key property 'NeteaseHeroStat.HeroId1' was created in shadow state because a conflicting property with the simple name 'HeroId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-11-22 18:04:29.028 +08:00 [WRN] The 'PlayerRoleType' property 'RoleType' on entity type 'Player' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Unknown', since this is the CLR default for the 'PlayerRoleType' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-11-22 18:04:29.123 +08:00 [INF] EF provider: Npgsql.EntityFrameworkCore.PostgreSQL, database: idvevent
2025-11-22 18:04:29.245 +08:00 [INF] Applied schema patch for Events.CustomData.
2025-11-22 18:04:29.245 +08:00 [INF] Local heroes import setting: true
2025-11-22 18:04:29.246 +08:00 [INF] Local heroes overwrite setting: false
2025-11-22 18:04:29.247 +08:00 [INF] Local stats import setting: true
2025-11-22 18:04:29.247 +08:00 [INF] Local stats overwrite setting: false
2025-11-22 18:04:29.249 +08:00 [INF] Found 12 NeteaseJ files in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:04:29.515 +08:00 [INF] Netease heroes seeding completed: 0 added, 0 updated; total=83
2025-11-22 18:04:29.517 +08:00 [INF] Found 12 NeteaseJ files for stats in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:04:34.038 +08:00 [INF] Netease stats seeding completed: 0 added; total=20286
2025-11-22 18:04:34.058 +08:00 [INF] Starting Kestrel...
2025-11-22 18:11:38.453 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-22 18:11:38.511 +08:00 [INF] WebApplication built successfully.
2025-11-22 18:11:38.582 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-22 18:11:38.582 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-22 18:11:38.981 +08:00 [WRN] The foreign key property 'NeteaseHeroStat.HeroId1' was created in shadow state because a conflicting property with the simple name 'HeroId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-11-22 18:11:38.998 +08:00 [WRN] The 'PlayerRoleType' property 'RoleType' on entity type 'Player' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Unknown', since this is the CLR default for the 'PlayerRoleType' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-11-22 18:11:39.090 +08:00 [INF] EF provider: Npgsql.EntityFrameworkCore.PostgreSQL, database: idvevent
2025-11-22 18:11:39.504 +08:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoles" (
    "Id" text NOT NULL,
    "Name" character varying(256),
    "NormalizedName" character varying(256),
    "ConcurrencyStamp" text,
    CONSTRAINT "PK_AspNetRoles" PRIMARY KEY ("Id")
);
2025-11-22 18:11:39.508 +08:00 [ERR] Database migration failed after patch failure.
Npgsql.PostgresException (0x80004005): 42P07: 关系 "AspNetRoles" 已经存在
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\luolan\ASG\ASG.Api\Program.cs:line 343
  Exception data:
    Severity: 错误
    SqlState: 42P07
    MessageText: 关系 "AspNetRoles" 已经存在
    File: heap.c
    Line: 1179
    Routine: heap_create_with_catalog
2025-11-22 18:11:39.525 +08:00 [INF] Local heroes import setting: true
2025-11-22 18:11:39.525 +08:00 [INF] Local heroes overwrite setting: false
2025-11-22 18:11:39.525 +08:00 [INF] Local stats import setting: true
2025-11-22 18:11:39.525 +08:00 [INF] Local stats overwrite setting: false
2025-11-22 18:11:39.528 +08:00 [INF] Found 12 NeteaseJ files in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:11:39.788 +08:00 [INF] Netease heroes seeding completed: 0 added, 0 updated; total=83
2025-11-22 18:11:39.790 +08:00 [INF] Found 12 NeteaseJ files for stats in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:11:44.248 +08:00 [INF] Netease stats seeding completed: 0 added; total=20286
2025-11-22 18:11:44.267 +08:00 [INF] Starting Kestrel...
2025-11-22 18:16:15.477 +08:00 [INF] User logged in successfully: luolan12323@outlook.com
2025-11-22 18:16:18.091 +08:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."CreatedAt", t0."Description", t0."InviteExpiresAt", t0."InviteToken", t0."Likes", t0."Name", t0."OwnerId", t0."Password", t0."QqNumber", t0."UpdatedAt", t0."UserId", t0."Id0", p."Id", p."CreatedAt", p."Description", p."GameId", p."GameRank", p."Name", p."RoleType", p."TeamId", p."UpdatedAt", p."UserId", t0."AccessFailedCount", t0."ConcurrencyStamp", t0."CreatedAt0", t0."Email", t0."EmailConfirmed", t0."EmailCredits", t0."FirstName", t0."IsActive", t0."LastName", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."Role", t0."SecurityStamp", t0."TeamId", t0."TwoFactorEnabled", t0."UpdatedAt0", t0."UserName"
FROM (
    SELECT t."Id", t."CreatedAt", t."Description", t."InviteExpiresAt", t."InviteToken", t."Likes", t."Name", t."OwnerId", t."Password", t."QqNumber", t."UpdatedAt", t."UserId", u."Id" AS "Id0", u."AccessFailedCount", u."ConcurrencyStamp", u."CreatedAt" AS "CreatedAt0", u."Email", u."EmailConfirmed", u."EmailCredits", u."FirstName", u."IsActive", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."Role", u."SecurityStamp", u."TeamId", u."TwoFactorEnabled", u."UpdatedAt" AS "UpdatedAt0", u."UserName"
    FROM "Teams" AS t
    LEFT JOIN "Users" AS u ON t."Id" = u."TeamId"
    WHERE t."Id" = @__id_0
    LIMIT 1
) AS t0
LEFT JOIN "Players" AS p ON t0."Id" = p."TeamId"
ORDER BY t0."Id", t0."Id0"
2025-11-22 18:16:18.097 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ASG.Api.Data.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:18.102 +08:00 [ERR] 获取战队详情时发生错误，战队ID: "c12a1ab8-1a7f-486e-ac8f-de48044ddee3"
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ASG.Api.Repositories.TeamRepository.GetTeamByIdWithPlayersAsync(Guid id) in C:\Users\luolan\ASG\ASG.Api\Repositories\TeamRepository.cs:line 62
   at ASG.Api.Services.TeamService.GetTeamByIdAsync(Guid id) in C:\Users\luolan\ASG\ASG.Api\Services\TeamService.cs:line 51
   at ASG.Api.Controllers.TeamsController.GetTeam(Guid id) in C:\Users\luolan\ASG\ASG.Api\Controllers\TeamsController.cs:line 122
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:18.125 +08:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."CreatedAt", p."Description", p."GameId", p."GameRank", p."Name", p."RoleType", p."TeamId", p."UpdatedAt", p."UserId"
FROM "Players" AS p
WHERE p."UserId" = @__userId_0
LIMIT 1
2025-11-22 18:16:18.127 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ASG.Api.Data.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 84
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 84
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 84
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 84
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:18.130 +08:00 [ERR] 获取我的玩家失败
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 84
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ASG.Api.Repositories.TeamRepository.GetPlayerByUserIdAsync(String userId) in C:\Users\luolan\ASG\ASG.Api\Repositories\TeamRepository.cs:line 232
   at ASG.Api.Services.TeamService.GetMyPlayerAsync(String userId) in C:\Users\luolan\ASG\ASG.Api\Services\TeamService.cs:line 609
   at ASG.Api.Controllers.TeamsController.GetMyPlayer() in C:\Users\luolan\ASG\ASG.Api\Controllers\TeamsController.cs:line 521
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 84
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:24.464 +08:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."CreatedAt", t0."Description", t0."InviteExpiresAt", t0."InviteToken", t0."Likes", t0."Name", t0."OwnerId", t0."Password", t0."QqNumber", t0."UpdatedAt", t0."UserId", t0."Id0", p."Id", p."CreatedAt", p."Description", p."GameId", p."GameRank", p."Name", p."RoleType", p."TeamId", p."UpdatedAt", p."UserId", t0."AccessFailedCount", t0."ConcurrencyStamp", t0."CreatedAt0", t0."Email", t0."EmailConfirmed", t0."EmailCredits", t0."FirstName", t0."IsActive", t0."LastName", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."Role", t0."SecurityStamp", t0."TeamId", t0."TwoFactorEnabled", t0."UpdatedAt0", t0."UserName"
FROM (
    SELECT t."Id", t."CreatedAt", t."Description", t."InviteExpiresAt", t."InviteToken", t."Likes", t."Name", t."OwnerId", t."Password", t."QqNumber", t."UpdatedAt", t."UserId", u."Id" AS "Id0", u."AccessFailedCount", u."ConcurrencyStamp", u."CreatedAt" AS "CreatedAt0", u."Email", u."EmailConfirmed", u."EmailCredits", u."FirstName", u."IsActive", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."Role", u."SecurityStamp", u."TeamId", u."TwoFactorEnabled", u."UpdatedAt" AS "UpdatedAt0", u."UserName"
    FROM "Teams" AS t
    LEFT JOIN "Users" AS u ON t."Id" = u."TeamId"
    WHERE t."Id" = @__id_0
    LIMIT 1
) AS t0
LEFT JOIN "Players" AS p ON t0."Id" = p."TeamId"
ORDER BY t0."Id", t0."Id0"
2025-11-22 18:16:24.466 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ASG.Api.Data.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:24.470 +08:00 [ERR] 获取战队详情时发生错误，战队ID: "c12a1ab8-1a7f-486e-ac8f-de48044ddee3"
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ASG.Api.Repositories.TeamRepository.GetTeamByIdWithPlayersAsync(Guid id) in C:\Users\luolan\ASG\ASG.Api\Repositories\TeamRepository.cs:line 62
   at ASG.Api.Services.TeamService.GetTeamByIdAsync(Guid id) in C:\Users\luolan\ASG\ASG.Api\Services\TeamService.cs:line 51
   at ASG.Api.Controllers.TeamsController.GetTeam(Guid id) in C:\Users\luolan\ASG\ASG.Api\Controllers\TeamsController.cs:line 122
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:24.489 +08:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."CreatedAt", p."Description", p."GameId", p."GameRank", p."Name", p."RoleType", p."TeamId", p."UpdatedAt", p."UserId"
FROM "Players" AS p
WHERE p."UserId" = @__userId_0
LIMIT 1
2025-11-22 18:16:24.490 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ASG.Api.Data.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 84
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 84
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 84
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 84
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:24.495 +08:00 [ERR] 获取我的玩家失败
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 84
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ASG.Api.Repositories.TeamRepository.GetPlayerByUserIdAsync(String userId) in C:\Users\luolan\ASG\ASG.Api\Repositories\TeamRepository.cs:line 232
   at ASG.Api.Services.TeamService.GetMyPlayerAsync(String userId) in C:\Users\luolan\ASG\ASG.Api\Services\TeamService.cs:line 609
   at ASG.Api.Controllers.TeamsController.GetMyPlayer() in C:\Users\luolan\ASG\ASG.Api\Controllers\TeamsController.cs:line 521
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 84
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:43.538 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-22 18:16:43.566 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-22 18:16:43.566 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-22 18:16:45.960 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-22 18:16:50.613 +08:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."CreatedAt", t0."Description", t0."InviteExpiresAt", t0."InviteToken", t0."Likes", t0."Name", t0."OwnerId", t0."Password", t0."QqNumber", t0."UpdatedAt", t0."UserId", t0."Id0", p."Id", p."CreatedAt", p."Description", p."GameId", p."GameRank", p."Name", p."RoleType", p."TeamId", p."UpdatedAt", p."UserId", t0."AccessFailedCount", t0."ConcurrencyStamp", t0."CreatedAt0", t0."Email", t0."EmailConfirmed", t0."EmailCredits", t0."FirstName", t0."IsActive", t0."LastName", t0."LockoutEnabled", t0."LockoutEnd", t0."NormalizedEmail", t0."NormalizedUserName", t0."PasswordHash", t0."PhoneNumber", t0."PhoneNumberConfirmed", t0."Role", t0."SecurityStamp", t0."TeamId", t0."TwoFactorEnabled", t0."UpdatedAt0", t0."UserName"
FROM (
    SELECT t."Id", t."CreatedAt", t."Description", t."InviteExpiresAt", t."InviteToken", t."Likes", t."Name", t."OwnerId", t."Password", t."QqNumber", t."UpdatedAt", t."UserId", u."Id" AS "Id0", u."AccessFailedCount", u."ConcurrencyStamp", u."CreatedAt" AS "CreatedAt0", u."Email", u."EmailConfirmed", u."EmailCredits", u."FirstName", u."IsActive", u."LastName", u."LockoutEnabled", u."LockoutEnd", u."NormalizedEmail", u."NormalizedUserName", u."PasswordHash", u."PhoneNumber", u."PhoneNumberConfirmed", u."Role", u."SecurityStamp", u."TeamId", u."TwoFactorEnabled", u."UpdatedAt" AS "UpdatedAt0", u."UserName"
    FROM "Teams" AS t
    LEFT JOIN "Users" AS u ON t."Id" = u."TeamId"
    WHERE t."Id" = @__id_0
    LIMIT 1
) AS t0
LEFT JOIN "Players" AS p ON t0."Id" = p."TeamId"
ORDER BY t0."Id", t0."Id0"
2025-11-22 18:16:50.615 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ASG.Api.Data.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:16:50.618 +08:00 [ERR] 获取战队详情时发生错误，战队ID: "790aafae-daab-4361-a579-82042c222c42"
Npgsql.PostgresException (0x80004005): 42703: 字段 p.RoleType 不存在

POSITION: 273
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ASG.Api.Repositories.TeamRepository.GetTeamByIdWithPlayersAsync(Guid id) in C:\Users\luolan\ASG\ASG.Api\Repositories\TeamRepository.cs:line 62
   at ASG.Api.Services.TeamService.GetTeamByIdAsync(Guid id) in C:\Users\luolan\ASG\ASG.Api\Services\TeamService.cs:line 51
   at ASG.Api.Controllers.TeamsController.GetTeam(Guid id) in C:\Users\luolan\ASG\ASG.Api\Controllers\TeamsController.cs:line 122
  Exception data:
    Severity: 错误
    SqlState: 42703
    MessageText: 字段 p.RoleType 不存在
    Position: 273
    File: parse_relation.c
    Line: 3827
    Routine: errorMissingColumn
2025-11-22 18:22:19.440 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-22 18:22:19.504 +08:00 [INF] WebApplication built successfully.
2025-11-22 18:22:19.574 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-22 18:22:19.575 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-22 18:22:19.948 +08:00 [WRN] The foreign key property 'NeteaseHeroStat.HeroId1' was created in shadow state because a conflicting property with the simple name 'HeroId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-11-22 18:22:20.040 +08:00 [INF] EF provider: Npgsql.EntityFrameworkCore.PostgreSQL, database: idvevent
2025-11-22 18:22:20.150 +08:00 [INF] Applied schema patch for Events.CustomData.
2025-11-22 18:22:20.151 +08:00 [INF] Local heroes import setting: true
2025-11-22 18:22:20.152 +08:00 [INF] Local heroes overwrite setting: false
2025-11-22 18:22:20.152 +08:00 [INF] Local stats import setting: true
2025-11-22 18:22:20.152 +08:00 [INF] Local stats overwrite setting: false
2025-11-22 18:22:20.154 +08:00 [INF] Found 12 NeteaseJ files in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:22:20.431 +08:00 [INF] Netease heroes seeding completed: 0 added, 0 updated; total=83
2025-11-22 18:22:20.432 +08:00 [INF] Found 12 NeteaseJ files for stats in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:22:24.736 +08:00 [INF] Netease stats seeding completed: 0 added; total=20286
2025-11-22 18:22:24.755 +08:00 [INF] Starting Kestrel...
2025-11-22 18:24:00.598 +08:00 [INF] Using URLs: http://localhost:5250
2025-11-22 18:24:00.671 +08:00 [INF] WebApplication built successfully.
2025-11-22 18:24:00.748 +08:00 [INF] SignalR hub mapped: Path=/hubs/app, AuthScheme=JWT Bearer, QueryToken=access_token for '/hubs/*'
2025-11-22 18:24:00.749 +08:00 [INF] CORS policy 'DevCors' applied: AllowAnyOrigin/AnyHeader/AnyMethod (Development)
2025-11-22 18:24:01.175 +08:00 [WRN] The foreign key property 'NeteaseHeroStat.HeroId1' was created in shadow state because a conflicting property with the simple name 'HeroId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-11-22 18:24:01.273 +08:00 [INF] EF provider: Npgsql.EntityFrameworkCore.PostgreSQL, database: idvevent
2025-11-22 18:24:01.392 +08:00 [INF] Applied schema patch for Events.CustomData.
2025-11-22 18:24:01.392 +08:00 [INF] Local heroes import setting: true
2025-11-22 18:24:01.393 +08:00 [INF] Local heroes overwrite setting: false
2025-11-22 18:24:01.393 +08:00 [INF] Local stats import setting: true
2025-11-22 18:24:01.393 +08:00 [INF] Local stats overwrite setting: false
2025-11-22 18:24:01.395 +08:00 [INF] Found 12 NeteaseJ files in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:24:01.686 +08:00 [INF] Netease heroes seeding completed: 0 added, 0 updated; total=83
2025-11-22 18:24:01.688 +08:00 [INF] Found 12 NeteaseJ files for stats in C:\Users\luolan\ASG\ASG.Api\bin\Debug\net8.0\NeteaseJ
2025-11-22 18:24:06.182 +08:00 [INF] Netease stats seeding completed: 0 added; total=20286
2025-11-22 18:24:06.202 +08:00 [INF] Starting Kestrel...
